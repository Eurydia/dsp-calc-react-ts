import{j as e,r,d as n}from"./vendor_react-D68IYUmK.js";import{I as t,J as l,P as i,S as a,L as s,N as o}from"./vendor-RD1ZlHaW.js";import{s as c,P as d,T as p,I as u,G as f,a as h,R as x,b as m,c as j,S as y,d as g,C as b,E as C,e as S,M as v,L as M,f as R,g as P,h as w,i as I,j as O,k as T,l as A,m as k,B as N,F,n as E,o as $,p as _,q as W,D,r as G,A as U,t as z,u as q,v as L,U as X,w as B,x as J,y as V,z as H,H as K,J as Y}from"./vendor_mui-C0O2UOWw.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&r(e)})).observe(document,{childList:!0,subtree:!0})}function r(e){if(e.ep)return;e.ep=!0;const r=function(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?r.credentials="include":"anonymous"===e.crossOrigin?r.credentials="omit":r.credentials="same-origin",r}(e);fetch(e.href,r)}}();const Z=e=>`./images/${e.replaceAll(" ","_").toLowerCase()}.webp`,Q=e=>{switch(e.sprayCount){case 12:return"./images/proliferator_mk.i.webp";case 24:return"./images/proliferator_mk.ii.webp";case 60:return"./images/proliferator_mk.iii.webp"}return"./images/none.webp"},ee=c(d)((({theme:e})=>({padding:e.spacing(2),display:"flex",flexDirection:"column",gap:e.spacing(2)}))),re=r=>{const{placeholder:n,disabled:t,maxLength:l,prefix:i,suffix:a,label:s,value:o,onChange:c}=r;return e.jsx(p,{fullWidth:!0,placeholder:n,disabled:t,label:s,value:o,onChange:e=>{const r=e.target.value.slice(0,l).normalize();c(r)},InputProps:{startAdornment:e.jsx(u,{position:"start",children:i}),endAdornment:e.jsx(u,{position:"end",children:a})}})},ne=r=>{const{data:n,handlers:t}=r,l="0"===n.computeMode?n.constraint:n.capacity,i="0"===n.computeMode?t.handleConstraintUpdate:t.handleCapacityUpdate,a=Object.entries(l).map((([r,n])=>e.jsxs(f,{item:!0,xs:12,md:6,display:"flex",alignItems:"center",children:[e.jsx(re,{label:r,maxLength:6,suffix:"/min",prefix:e.jsx("img",{alt:r,src:Z(r)}),value:n,onChange:e=>i(r,e)}),e.jsx(h,{size:"small",color:"primary",children:e.jsx(x,{}),onClick:()=>i(r,"")})]},r)));return e.jsxs(ee,{square:!0,elevation:2,children:[e.jsxs(m,{value:n.computeMode,onChange:(e,r)=>{t.handleComputeModeChange(r)},children:[e.jsx(j,{disableRipple:!0,label:"Constraint",value:"0"}),e.jsx(j,{disableRipple:!0,label:"Capacity",value:"1"})]}),e.jsx(f,{container:!0,spacing:2,children:a})]})},te=n=>{const{title:t,children:l}=n,[i,a]=r.useState(!1),s=i?e.jsx(C,{}):e.jsx(S,{});return e.jsxs(r.Fragment,{children:[e.jsxs(y,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(g,{fontWeight:"500",fontSize:"large",color:"secondary.main",children:t}),e.jsx(h,{disableRipple:!0,size:"small",color:"primary",onClick:()=>{a(!i)},children:s})]}),e.jsx(b,{in:!i,children:e.jsx(y,{spacing:2,children:l})})]})},le=e=>t.get(e),ie=e=>l.get(e),ae=e=>i.get(e),se=e=>a.get(e),oe=n=>{const{onChange:l,value:i}=n,{current:a}=r.useRef([...t.values()]),s=a.map((({label:r})=>e.jsxs(v,{value:r,disableRipple:!0,children:[e.jsx(M,{children:e.jsx("img",{src:Z(r),alt:r})}),e.jsx(R,{children:r})]},r)));return e.jsx(P,{size:"small",value:i.label,onChange:e=>{const r=le(e.target.value);void 0!==r&&l(r)},SelectDisplayProps:{style:{display:"flex",alignItems:"center"}},children:s})},ce=r=>{const{value:n,label:t,onChange:l}=r;return e.jsxs(y,{direction:"row",alignItems:"center",children:[e.jsx(re,{label:t,maxLength:6,value:n,suffix:"/min",onChange:e=>{l(t,e)},prefix:e.jsx("img",{alt:t,src:Z(t)})}),e.jsx(h,{disableRipple:!0,size:"small",color:"primary",children:e.jsx(x,{}),onClick:()=>{l(t,"")}})]})},de=r=>{const{defaultValue:n,disabled:t,onChange:l,value:i}=r;return e.jsxs(y,{direction:"row",alignItems:"center",children:[e.jsx(re,{disabled:t,placeholder:n,maxLength:6,label:"Spray Count",value:i,onChange:l,suffix:"sprays"}),e.jsx(h,{disableRipple:!0,disabled:t,size:"small",color:"primary",children:e.jsx(x,{}),onClick:()=>{l(n)}})]})},pe=n=>{const{onChange:t,value:l,speedupOnly:a}=n,{current:o}=r.useRef([...i.values()]),c=[],d=[];for(const e of o)a&&e.mode===s.EXTRA_PRODUCTS?d.push(e):c.push(e);const p=c.map((r=>{const{label:n}=r;return e.jsxs(v,{value:n,disableRipple:!0,children:["None"!==n&&e.jsx(M,{children:e.jsx("img",{src:Q(r),alt:n})}),e.jsx(R,{children:n})]},n)})),u=d.map((({label:r})=>e.jsx(v,{disabled:!0,value:r,disableRipple:!0,children:e.jsx(R,{children:r})},r)));return e.jsxs(P,{size:"small",value:l.label,onChange:e=>{const r=ae(e.target.value);void 0!==r&&t(r)},SelectDisplayProps:{style:{display:"flex",alignItems:"center"}},children:[p,u]})},ue=n=>{const{onChange:t,value:i,recipeType:a}=n,{current:s}=r.useRef([...l.values()]),o=[],c=[];for(const e of s)e.recipeType===a?o.push(e):c.push(e);const d=o.map((({label:r})=>e.jsxs(v,{value:r,disableRipple:!0,children:[e.jsx(M,{children:e.jsx("img",{src:Z(r),alt:r})}),e.jsx(R,{children:r})]},r))),p=c.map((({label:r})=>e.jsx(v,{disabled:!0,value:r,disableRipple:!0,children:e.jsx(R,{children:r})},r)));return e.jsxs(P,{size:"small",value:i.label,onChange:e=>{const r=ie(e.target.value);void 0!==r&&t(r)},SelectDisplayProps:{style:{display:"flex",alignItems:"center"}},children:[d,p]})},fe=r=>{const{prefix:n,suffix:t,value:l,label:i,onChange:a}=r;return e.jsxs(y,{direction:"row",alignItems:"center",children:[e.jsx(re,{label:i,maxLength:6,value:l,onChange:e=>{a(i,e)},suffix:t,prefix:n}),e.jsx(h,{disableTouchRipple:!0,size:"small",color:"primary",children:e.jsx(x,{}),onClick:()=>{a(i,"")}})]})},he=r=>{const{data:n,handlers:t}=r,l=Object.entries(n.flowrate).map((([r,n])=>e.jsx(ce,{value:n,label:r,onChange:t.handleFlowrateChange},r))),i=Object.entries(n.sorter).map((([r,n])=>e.jsx(fe,{prefix:e.jsx("img",{src:Z(r),alt:r}),label:r,value:n,onChange:t.handleSorterChange},r)));return e.jsxs(y,{spacing:2,children:[e.jsx(g,{fontWeight:"600",fontSize:"x-large",color:"secondary.main",children:"Configuration"}),e.jsxs(g,{fontWeight:"400",fontSize:"small",children:["DSP version: ",o]}),e.jsxs(te,{title:"Manufacturing",children:[e.jsx(oe,{value:n.facility,onChange:t.handleFacilityChange}),e.jsx(ue,{value:n.recipe,onChange:t.handleRecipeChange,recipeType:n.facility.recipeType})]}),e.jsx(te,{title:"Transport capacity",children:e.jsx(y,{spacing:1,children:l})}),e.jsxs(te,{title:"Proliferation",children:[e.jsx(pe,{value:n.proliferator,speedupOnly:n.recipe.speedupOnly,onChange:t.handleProliferatorChange}),e.jsx(de,{defaultValue:n.proliferator.sprayCount.toString(),value:n.proliferatorSprayCount,disabled:"None"===n.proliferator.label,onChange:t.handleProliferatorSprayCountChange})]}),e.jsx(te,{title:"Sorter connections",children:e.jsx(y,{spacing:1,children:i})})]})},xe=c(w)((({theme:e})=>({color:e.palette.secondary.main}))),me=new Intl.NumberFormat("en-US",{maximumSignificantDigits:6,signDisplay:"exceptZero"}),je=e=>me.format(e),ye=r=>{const{label:n,perArray:t,perFacility:l,perTotal:i}=r,a=[i,t,l].map(((r,t)=>e.jsx(w,{colSpan:1,align:"right",children:je(r)},`${n}-${t}`)));let s=Z(n);if(n.includes("(materials)")||n.includes("(products)")){const e=ae(n.replaceAll("(materials)","").replaceAll("(products)","").trim());void 0!==e&&(s=Q(e))}return e.jsxs(k,{children:[e.jsx(w,{colSpan:1,sx:{display:"flex",justifyContent:"center"},children:e.jsx("img",{alt:n,src:s})}),e.jsx(w,{colSpan:2,children:n}),a]})},ge=()=>e.jsxs(k,{children:[e.jsx(w,{colSpan:1}),e.jsx(xe,{colSpan:2,children:"Flow (per minute)"}),e.jsx(xe,{colSpan:1,align:"right",children:"Total"}),e.jsx(xe,{colSpan:1,align:"right",children:"Per array"}),e.jsx(xe,{colSpan:1,align:"right",children:"Per facility"})]}),be=r=>{const{data:n,placement:t}=r,{materialFlowPerMinutePerFacility:l,productFlowPerMinutePerFacility:i}=n,{facilitiesNeeded:a,facilitiesPerArray:s}=t,o=Object.entries(l).map((([r,n],t)=>e.jsx(ye,{label:r,perFacility:-n,perArray:-n*a,perTotal:-n*s},`m-${r}-${t}`))),c=Object.entries(i).map((([r,n],t)=>e.jsx(ye,{label:r,perFacility:n,perArray:n*a,perTotal:n*s},`prod-${r}-${t}`)));return e.jsx(ee,{square:!0,elevation:2,children:e.jsx(I,{children:e.jsxs(O,{children:[e.jsx(T,{children:e.jsx(ge,{})}),e.jsxs(A,{children:[o,c]})]})})})},Ce=n=>{const{placement:t}=n,{current:l}=r.useRef([{icon:e.jsx(F,{color:"secondary"}),render:e=>e.facilitiesPerArray,label:"Facilities per array"},{icon:e.jsx(F,{color:"secondary"}),render:e=>e.arraysNeeded,label:"Arrays needed"},{icon:e.jsx(F,{color:"secondary"}),render:e=>e.facilitiesNeeded,label:"Total facilities needed"},{icon:e.jsx(F,{color:"secondary"}),render:e=>e.leftoverFacilities,label:"Leftover facilities"}]),i=l.map((({icon:r,label:n,render:l})=>e.jsxs(E,{disableGutters:!0,children:[e.jsx(M,{children:r}),e.jsx(R,{primary:n,secondary:l(t)})]},n)));return e.jsx(ee,{square:!0,elevation:2,children:e.jsxs($,{dense:!0,disablePadding:!0,children:[e.jsx(_,{disableGutters:!0,disableSticky:!0,children:"Placement"}),i]})})},Se=n=>{const{recipe:t}=n,{current:l}=r.useRef([{icon:e.jsx(W,{color:"secondary"}),render:e=>`${e.cycleTimeSecond} s`,label:"Cycle time"},{icon:e.jsx(D,{color:"secondary"}),render:e=>e.speedupOnly?"No":"Yes",label:"Extra products bonus"},{icon:e.jsx(G,{color:"secondary"}),render:e=>Object.entries(e.materialRecord).map((([e,r])=>`${r} ${e}`)),label:"Materials"},{icon:e.jsx(U,{color:"secondary"}),render:e=>Object.entries(e.productRecord).map((([e,r])=>`${r} ${e}`)),label:"Products"}]),i=l.map((({icon:r,label:n,render:l})=>e.jsxs(E,{disableGutters:!0,children:[e.jsx(M,{children:r}),e.jsx(R,{primary:n,secondary:l(t)})]},n)));return e.jsx(ee,{square:!0,elevation:2,children:e.jsxs($,{dense:!0,disablePadding:!0,children:[e.jsx(_,{disableGutters:!0,disableSticky:!0,children:"Recipe Information"}),i]})})},ve=n=>{const{proliferator:t}=n,{current:l}=r.useRef([{icon:e.jsx(W,{color:"secondary"}),render:e=>`${je(100*(e.cycleMultiplier-1))}%`,label:"Bonus cycle speed"},{icon:e.jsx(W,{color:"secondary"}),render:e=>`${je(100*(e.productMultiplier-1))}%`,label:"Bonus products per cycle"},{icon:e.jsx(z,{color:"secondary"}),render:e=>`${je(100*(e.workConsumptionMultiplier-1))}%`,label:"Additional work consumption"}]),i=l.map((({icon:r,label:n,render:l})=>e.jsxs(E,{disableGutters:!0,children:[e.jsx(M,{children:r}),e.jsx(R,{primary:n,secondary:l(t)})]},n)));return e.jsx(ee,{square:!0,elevation:2,children:e.jsxs($,{dense:!0,disablePadding:!0,children:[e.jsx(_,{disableGutters:!0,disableSticky:!0,children:"Proliferator effects"}),i]})})},Me=n=>{const{facility:t}=n,{current:l}=r.useRef([{icon:e.jsx(q,{color:"secondary"}),render:e=>e.label,label:"Name"},{icon:e.jsx(L,{color:"secondary"}),render:e=>e.recipeType,label:"Category"},{icon:e.jsx(W,{color:"secondary"}),render:e=>`${je(100*e.cycleMultiplier)}%`,label:"Cycle speed"},{icon:e.jsx(X,{color:"secondary"}),render:e=>e.connectionCount,label:"Sorter connections"},{icon:e.jsx(z,{color:"secondary"}),render:e=>`${je(e.workConsumptionMW)} MW`,label:"Work comsumption"},{icon:e.jsx(z,{color:"secondary"}),render:e=>`${je(e.idleConsumptionMW)} MW`,label:"Idle comsumption"}]),i=l.map((({icon:r,label:n,render:l})=>e.jsxs(E,{disableGutters:!0,children:[e.jsx(M,{children:r}),e.jsx(R,{primary:n,secondary:l(t)})]},n)));return e.jsx(ee,{square:!0,elevation:2,children:e.jsxs($,{dense:!0,disablePadding:!0,children:[e.jsx(_,{disableGutters:!0,disableSticky:!0,children:"Facility information"}),i]})})},Re=r=>{const{data:n,placement:t}=r;return e.jsx(N,{children:e.jsxs(f,{container:!0,spacing:2,children:[e.jsxs(f,{item:!0,xs:12,md:6,display:"flex",flexDirection:"column",gap:2,children:[e.jsx(Ce,{placement:t}),e.jsx(Se,{recipe:n.recipe})]}),e.jsxs(f,{item:!0,xs:12,md:6,display:"flex",flexDirection:"column",gap:2,children:[e.jsx(Me,{facility:n.facility}),e.jsx(ve,{proliferator:n.proliferator})]})]})})},Pe=()=>e.jsxs(k,{children:[e.jsx(xe,{colSpan:3,children:"Power consumption (MW)"}),e.jsx(xe,{colSpan:1,align:"right",children:"Total"}),e.jsx(xe,{colSpan:1,align:"right",children:"Per array"}),e.jsx(xe,{colSpan:1,align:"right",children:"Per facility"})]}),we=r=>{const{data:{workUsageMWPerFacility:n,idleUsageMWPerFacility:t},placement:{facilitiesNeeded:l,facilitiesPerArray:i}}=r,a=[-n*l,-n*i,-n].map(((r,n)=>e.jsx(w,{colSpan:1,align:"right",children:je(r)},`supply-${n}`))),s=[-t*l,-t*i,-t].map(((r,n)=>e.jsx(w,{colSpan:1,align:"right",children:je(r)},`power-${n}`)));return e.jsx(ee,{square:!0,elevation:2,children:e.jsx(I,{children:e.jsxs(O,{children:[e.jsx(T,{children:e.jsx(Pe,{})}),e.jsxs(A,{children:[e.jsxs(k,{children:[e.jsx(w,{colSpan:3,children:"Work"}),a]}),e.jsxs(k,{children:[e.jsx(w,{colSpan:3,children:"Idle"}),s]})]})]})})})},Ie=(e,r,n)=>{const t=Oe(e)??r;return t>n?n:t<r?r:t},Oe=e=>{const r=Number.parseInt(e);return Number.isNaN(r)?null:r},Te=e=>({materialFlowPerMinutePerFacility:(e=>{const{facility:r,recipe:n,proliferator:t,proliferatorSprayCount:l}=e,{cycleTimeSecond:i,materialRecord:a}=n,s=60/i*r.cycleMultiplier*t.cycleMultiplier,o={};for(const d in a)o[d]=a[d]*s;const c=Ie(l,0,Number.MAX_SAFE_INTEGER);if(c>0&&t.sprayCount>0){let e=0;for(const t of Object.values(n.materialRecord))e+=s*t;let r=0;for(const l of Object.values(n.productRecord))r+=s*l*t.productMultiplier;o[`${t.label} (materials)`]=e/c,o[`${t.label} (products)`]=r/c}return o})(e),productFlowPerMinutePerFacility:(e=>{const{facility:r,recipe:n,proliferator:t}=e,{cycleTimeSecond:l,productRecord:i}=n,a=60/l*r.cycleMultiplier*t.cycleMultiplier,s={};for(const o in i)s[o]=i[o]*a*t.productMultiplier;return s})(e)}),Ae=e=>{let r=0;r="constraint"===e.computeMode?((e,r)=>{const{facility:n,recipe:t,proliferator:l}=e,i={};for(const[o,c]of Object.entries(r))i[o]=Ie(c,0,Number.MAX_SAFE_INTEGER);if(Object.values(i).every((e=>0===e)))return 0;const a=60/t.cycleTimeSecond*n.cycleMultiplier*l.cycleMultiplier;let s=0;for(const[o,c]of Object.entries(t.materialRecord)){const e=c*a,r=i[o]/e;(r>0&&0===s||r<s)&&(s=r)}return s})(e,e.constraint):((e,r)=>{const{facility:n,proliferator:t,recipe:l}=e,i={};for(const[o,c]of Object.entries(r))i[o]=Ie(c,0,Number.MAX_SAFE_INTEGER);if(Object.values(i).every((e=>0===e)))return 0;const a=60/l.cycleTimeSecond*n.cycleMultiplier*t.cycleMultiplier;let s=0;for(const[o,c]of Object.entries(l.productRecord)){const e=c*a*t.productMultiplier,r=i[o]/e;r>s&&(s=r)}return s})(e,e.capacity);const n=(e=>{const{flowrate:r,facility:n,recipe:t,proliferator:l}=e,i={};for(const c in r)i[c]=Ie(r[c],0,Number.MAX_SAFE_INTEGER);const a=60/t.cycleTimeSecond*n.cycleMultiplier*l.cycleMultiplier;let s=0;for(const c in t.materialRecord){const e=i[c]/(i[c]*a);(0===s&&e>0||e<s)&&(s=e)}let o=0;for(const c in t.productRecord){const e=i[c]/(i[c]*a*l.productMultiplier);(0===o&&e>0||e<o)&&(o=e)}return Math.min(s,o)})(e);let t=0;return n>0&&(t=Math.floor(r/n),r-=t*n),{facilitiesNeeded:r,facilitiesPerArray:n,arraysNeeded:t,leftoverFacilities:0}},ke=e=>{const r=(e=>{const{sorter:r,facility:n}=e;let t=0;for(const l in r){const e=se(l);void 0!==e&&(t+=Ie(r[l],0,Number.MAX_SAFE_INTEGER)*e.idleConsumptionMW)}return n.idleConsumptionMW+t})(e),n=(e=>{const{facility:r,proliferator:n,sorter:t}=e;let l=0;for(const i in t){const e=se(i);void 0!==e&&(l+=Ie(t[i],0,Number.MAX_SAFE_INTEGER)*e.workConsumptionMW)}return r.workConsumptionMW*n.workConsumptionMultiplier+l})(e);return{idleUsageMWPerFacility:r,workUsageMWPerFacility:n}},Ne="facility",Fe="recipe",Ee="proliferator",$e="sorter",_e="flowrate",We="proliferatorSprayCount",De="computeMode",Ge="constraint",Ue="capacity",ze=e=>{const r=localStorage.getItem(e);if(null===r)return null;const n=(e=>{try{return JSON.parse(e)}catch(r){return void console.warn(r)}})(r);if(!n||"object"!=typeof n)return null;for(const l in n)if("string"!=typeof l)return null;const t=n;for(const l in t){const e=t[l];if("string"!=typeof e)return null;if(""!==e&&null===Oe(e))return null}return t},qe=(e,r)=>{const n=localStorage.getItem(e);return n?r(n):null},Le=(e,r)=>{for(const n of r)if(void 0===e[n])return!1;for(const n in e)if(!r.includes(n))return!1;return!0},Xe=()=>{const e={facility:le("Arc Smelter"),recipe:ie("Copper Ingot"),proliferator:ae("None"),proliferatorSprayCount:"12",sorter:{"Sorter Mk.I":"","Sorter Mk.II":"","Sorter Mk.III":"","Pile Sorter":""},flowrate:{"Copper Ore":"","Copper Ingot":""},capacity:{"Copper Ingot":""},constraint:{"Copper Ore":""},computeMode:"0"},r=qe(De,(e=>"0"===e||"1"===e?e:null));if(!r)return e;const n=qe(Ne,le);if(!n)return e;const t=qe(Fe,ie);if(!t)return e;if(t.recipeType!==n.recipeType)return e;const l=qe(Ee,ae);if(!l)return e;if(t.speedupOnly&&l.mode===s.EXTRA_PRODUCTS)return e;const i=qe(We,(e=>{if(""===e)return"";const r=Oe(e);return!r||r<0?void 0:r.toString()}));if(!i)return e;const o=ze($e);if(!o)return e;if(!Le(o,[...a.values()].map((e=>e.label))))return e;const c=ze(Ge);if(!c)return e;if(!Le(c,Object.keys(t.materialRecord)))return e;const d=ze(Ue);if(!d)return e;if(!Le(d,Object.keys(t.productRecord)))return e;const p=ze(_e);if(null===p||!Le(p,[...Object.keys(t.materialRecord),...Object.keys(t.productRecord)]))return e;return{facility:n,recipe:t,proliferator:l,proliferatorSprayCount:i,sorter:o,flowrate:p,capacity:d,constraint:c,computeMode:r}},Be=(e,n)=>{const[t,l]=r.useState(n);r.useEffect((()=>{localStorage.setItem(e,JSON.stringify(t))}),[t]);return[t,(e,r)=>{l((n=>{const t={...n};return t[e]=r,t}))},l]},Je=(e,r,n)=>{let t=0;for(const l in r)l!==e&&(t+=Ie(r[l],0,n-t));return t},Ve=()=>{const{current:e}=r.useRef(Xe()),[n,t]=r.useState(e.computeMode),[a,o]=r.useState(e.facility),[c,d]=r.useState(e.recipe),p=e=>{if(d(e),localStorage.setItem(Fe,e.label),e.speedupOnly&&u.mode===s.EXTRA_PRODUCTS){const e=(e=>{for(const r of i.values())if(r.mode===e)return r})(s.PRODUCTION_SPEEDUP);void 0!==e?f(e):console.warn("Cannot find production speedup proliferator")}const r={},n={},t={};for(const l in e.materialRecord)n[l]="",r[l]="";for(const l in e.productRecord)t[l]="",r[l]="";S(r),I(t),R(n)},[u,f]=r.useState(e.proliferator),[h,x]=r.useState(e.proliferatorSprayCount),m=e=>{x(e),localStorage.setItem(We,e)},[j,y,g]=Be($e,e.sorter),[b,C,S]=Be(_e,e.flowrate),[v,M,R]=Be(Ge,e.constraint),[P,w,I]=Be(Ue,e.capacity);return[{facility:a,flowrate:b,proliferator:u,proliferatorSprayCount:h,recipe:c,sorter:j,capacity:P,computeMode:n,constraint:v},{handleConstraintUpdate:M,handleCapacityUpdate:w,handleComputeModeChange:e=>{t(e),localStorage.setItem(De,e)},handleFacilityChange:e=>{o(e),localStorage.setItem(Ne,e.label);const r=(e=>{for(const r of l.values())if(r.recipeType===e)return r})(e.recipeType);r?p(r):console.warn(`Cannot find recipe for ${e.recipeType}`)},handleProliferatorChange:e=>{f(e),localStorage.setItem(Ee,e.label),m(e.sprayCount.toString())},handleRecipeChange:p,handleSorterChange:(e,r)=>{""!==r?g((r=>{const n={...r},t=Je(e,n,a.connectionCount),l=a.connectionCount-t;return n[e]=l.toString(),n})):y(e,r)},handleFlowrateChange:(e,r)=>{""!==r?S((r=>{const n={...r},t=7200*a.connectionCount,l=t-Je(e,r,t);return n[e]=l.toString(),n})):C(e,r)},handleProliferatorSprayCountChange:m}]},He=r=>{const n=B(),t=J(n.breakpoints.down("md")),{slotMain:l,slotSide:i}=r;return t?e.jsxs(ee,{square:!0,elevation:0,children:[e.jsx(ee,{square:!0,elevation:2,children:i}),l]}):e.jsx(d,{square:!0,elevation:0,children:e.jsxs(f,{container:!0,columns:10,children:[e.jsx(f,{item:!0,md:!0,padding:4,height:"100vh",overflow:"auto",children:l}),e.jsx(f,{item:!0,md:3,height:"100vh",overflow:"auto",children:e.jsx(ee,{square:!0,elevation:2,children:i})})]})})},Ke=()=>{const[r,n]=Ve(),t=Te(r),l=ke(r),i=Ae(r);return e.jsx(He,{slotMain:e.jsxs(y,{spacing:2,children:[e.jsx(ne,{data:r,handlers:n}),e.jsx(be,{data:t,placement:i}),e.jsx(we,{placement:i,data:l}),e.jsx(Re,{data:r,placement:i})]}),slotSide:e.jsx(he,{data:r,handlers:n})})},Ye=V({components:{MuiCssBaseline:{styleOverrides:"img {\n\t\t\t\t\tloading: lazy;\n\t\t\t\t\twidth: auto;\n\t\t\t\t\theight: 40px;\n\t\t\t}"}},palette:{mode:"dark",text:{primary:H("#fff",.87)},primary:{main:"#7ABBAD"},secondary:{main:"#C8AA81"},background:{paper:"#181D22"}}}),Ze=()=>e.jsxs(K,{theme:Ye,children:[e.jsx(Y,{}),e.jsx(Ke,{})]});n(document.getElementById("root")).render(e.jsx(r.StrictMode,{children:e.jsx(Ze,{})}));
