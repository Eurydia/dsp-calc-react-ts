import{j as e,r,d as n}from"./vendor_react-D68IYUmK.js";import{I as t,J as l,P as i,S as o,L as a,N as s}from"./vendor-RD1ZlHaW.js";import{s as c,P as d,T as p,I as u,G as f,a as h,R as x,b as m,c as j,S as y,d as g,C as b,E as C,e as S,M as v,L as M,f as R,g as P,h as w,i as I,j as N,k as A,l as O,m as T,B as F,F as k,n as E,o as $,p as _,q as W,D,r as G,A as z,t as U,u as q,v as L,U as X,w as B,x as J,y as V,z as H,H as K,J as Y}from"./vendor_mui-C0O2UOWw.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&r(e)})).observe(document,{childList:!0,subtree:!0})}function r(e){if(e.ep)return;e.ep=!0;const r=function(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?r.credentials="include":"anonymous"===e.crossOrigin?r.credentials="omit":r.credentials="same-origin",r}(e);fetch(e.href,r)}}();const Z=e=>`./images/${e.replaceAll(" ","_").toLowerCase()}.webp`,Q=e=>{switch(e.sprayCount){case 12:return"./images/proliferator_mk.i.webp";case 24:return"./images/proliferator_mk.ii.webp";case 60:return"./images/proliferator_mk.iii.webp"}return"./images/none.webp"},ee=c(d)((({theme:e})=>({padding:e.spacing(2),display:"flex",flexDirection:"column",gap:e.spacing(2)}))),re=r=>{const{placeholder:n,disabled:t,maxLength:l,prefix:i,suffix:o,label:a,value:s,onChange:c}=r;return e.jsx(p,{fullWidth:!0,placeholder:n,disabled:t,label:a,value:s,onChange:e=>{const r=e.target.value.slice(0,l).normalize();c(r)},InputProps:{startAdornment:e.jsx(u,{position:"start",children:i}),endAdornment:e.jsx(u,{position:"end",children:o})}})},ne=r=>{const{data:n,handlers:t}=r,l="0"===n.computeMode?n.constraint:n.capacity,i="0"===n.computeMode?t.handleConstraintUpdate:t.handleCapacityUpdate,o=Object.entries(l).map((([r,n])=>e.jsxs(f,{item:!0,xs:12,md:6,display:"flex",alignItems:"center",children:[e.jsx(re,{label:r,maxLength:6,suffix:"/min",prefix:e.jsx("img",{alt:r,src:Z(r)}),value:n,onChange:e=>i(r,e)}),e.jsx(h,{size:"small",color:"primary",children:e.jsx(x,{}),onClick:()=>i(r,"")})]},r)));return e.jsxs(ee,{square:!0,elevation:2,children:[e.jsxs(m,{value:n.computeMode,onChange:(e,r)=>{t.handleComputeModeChange(r)},children:[e.jsx(j,{disableRipple:!0,label:"Constraint",value:"0"}),e.jsx(j,{disableRipple:!0,label:"Capacity",value:"1"})]}),e.jsx(f,{container:!0,spacing:2,children:o})]})},te=n=>{const{title:t,children:l}=n,[i,o]=r.useState(!1),a=i?e.jsx(C,{}):e.jsx(S,{});return e.jsxs(r.Fragment,{children:[e.jsxs(y,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(g,{fontWeight:"500",fontSize:"large",color:"secondary.main",children:t}),e.jsx(h,{disableRipple:!0,size:"small",color:"primary",onClick:()=>{o(!i)},children:a})]}),e.jsx(b,{in:!i,children:e.jsx(y,{spacing:2,children:l})})]})},le=e=>t.get(e),ie=e=>l.get(e),oe=e=>i.get(e),ae=e=>o.get(e),se=n=>{const{onChange:l,value:i}=n,{current:o}=r.useRef([...t.values()]),a=o.map((({label:r})=>e.jsxs(v,{value:r,disableRipple:!0,children:[e.jsx(M,{children:e.jsx("img",{src:Z(r),alt:r})}),e.jsx(R,{children:r})]},r)));return e.jsx(P,{size:"small",value:i.label,onChange:e=>{const r=le(e.target.value);void 0!==r&&l(r)},SelectDisplayProps:{style:{display:"flex",alignItems:"center"}},children:a})},ce=r=>{const{value:n,label:t,onChange:l}=r;return e.jsxs(y,{direction:"row",alignItems:"center",children:[e.jsx(re,{label:t,maxLength:6,value:n,suffix:"/min",onChange:e=>{l(t,e)},prefix:e.jsx("img",{alt:t,src:Z(t)})}),e.jsx(h,{disableRipple:!0,size:"small",color:"primary",children:e.jsx(x,{}),onClick:()=>{l(t,"")}})]})},de=r=>{const{defaultValue:n,disabled:t,onChange:l,value:i}=r;return e.jsxs(y,{direction:"row",alignItems:"center",children:[e.jsx(re,{disabled:t,placeholder:n,maxLength:6,label:"Spray Count",value:i,onChange:l,suffix:"sprays"}),e.jsx(h,{disableRipple:!0,disabled:t,size:"small",color:"primary",children:e.jsx(x,{}),onClick:()=>{l(n)}})]})},pe=n=>{const{onChange:t,value:l,speedupOnly:o}=n,{current:s}=r.useRef([...i.values()]),c=[],d=[];for(const e of s)o&&e.mode===a.EXTRA_PRODUCTS?d.push(e):c.push(e);const p=c.map((r=>{const{label:n}=r;return e.jsxs(v,{value:n,disableRipple:!0,children:["None"!==n&&e.jsx(M,{children:e.jsx("img",{src:Q(r),alt:n})}),e.jsx(R,{children:n})]},n)})),u=d.map((({label:r})=>e.jsx(v,{disabled:!0,value:r,disableRipple:!0,children:e.jsx(R,{children:r})},r)));return e.jsxs(P,{size:"small",value:l.label,onChange:e=>{const r=oe(e.target.value);void 0!==r&&t(r)},SelectDisplayProps:{style:{display:"flex",alignItems:"center"}},children:[p,u]})},ue=n=>{const{onChange:t,value:i,recipeType:o}=n,{current:a}=r.useRef([...l.values()]),s=[],c=[];for(const e of a)e.recipeType===o?s.push(e):c.push(e);const d=s.map((({label:r})=>e.jsxs(v,{value:r,disableRipple:!0,children:[e.jsx(M,{children:e.jsx("img",{src:Z(r),alt:r})}),e.jsx(R,{children:r})]},r))),p=c.map((({label:r})=>e.jsx(v,{disabled:!0,value:r,disableRipple:!0,children:e.jsx(R,{children:r})},r)));return e.jsxs(P,{size:"small",value:i.label,onChange:e=>{const r=ie(e.target.value);void 0!==r&&t(r)},SelectDisplayProps:{style:{display:"flex",alignItems:"center"}},children:[d,p]})},fe=r=>{const{prefix:n,suffix:t,value:l,label:i,onChange:o}=r;return e.jsxs(y,{direction:"row",alignItems:"center",children:[e.jsx(re,{label:i,maxLength:6,value:l,onChange:e=>{o(i,e)},suffix:t,prefix:n}),e.jsx(h,{disableTouchRipple:!0,size:"small",color:"primary",children:e.jsx(x,{}),onClick:()=>{o(i,"")}})]})},he=r=>{const{data:n,handlers:t}=r,l=Object.entries(n.flowrate).map((([r,n])=>e.jsx(ce,{value:n,label:r,onChange:t.handleFlowrateChange},r))),i=Object.entries(n.sorter).map((([r,n])=>e.jsx(fe,{prefix:e.jsx("img",{src:Z(r),alt:r}),label:r,value:n,onChange:t.handleSorterChange},r)));return e.jsxs(y,{spacing:2,children:[e.jsx(g,{fontWeight:"600",fontSize:"x-large",color:"secondary.main",children:"Configuration"}),e.jsxs(g,{fontWeight:"400",fontSize:"small",children:["DSP version: ",s]}),e.jsxs(te,{title:"Manufacturing",children:[e.jsx(se,{value:n.facility,onChange:t.handleFacilityChange}),e.jsx(ue,{value:n.recipe,onChange:t.handleRecipeChange,recipeType:n.facility.recipeType})]}),e.jsx(te,{title:"Transport capacity",children:e.jsx(y,{spacing:1,children:l})}),e.jsxs(te,{title:"Proliferation",children:[e.jsx(pe,{value:n.proliferator,speedupOnly:n.recipe.speedupOnly,onChange:t.handleProliferatorChange}),e.jsx(de,{defaultValue:n.proliferator.sprayCount.toString(),value:n.proliferatorSprayCount,disabled:"None"===n.proliferator.label,onChange:t.handleProliferatorSprayCountChange})]}),e.jsx(te,{title:"Sorter connections",children:e.jsx(y,{spacing:1,children:i})})]})},xe=c(w)((({theme:e})=>({color:e.palette.secondary.main}))),me=new Intl.NumberFormat("en-US",{maximumSignificantDigits:6,signDisplay:"exceptZero"}),je=e=>me.format(e),ye=r=>{const{label:n,perArray:t,perFacility:l,perTotal:i}=r,o=[i,t,l].map(((r,t)=>e.jsx(w,{colSpan:1,align:"right",children:je(r)},`${n}-${t}`)));let a=Z(n);if(n.includes("(materials)")||n.includes("(products)")){const e=oe(n.replaceAll("(materials)","").replaceAll("(products)","").trim());void 0!==e&&(a=Q(e))}return e.jsxs(T,{children:[e.jsx(w,{colSpan:1,sx:{display:"flex",justifyContent:"center"},children:e.jsx("img",{alt:n,src:a})}),e.jsx(w,{colSpan:2,children:n}),o]})},ge=()=>e.jsxs(T,{children:[e.jsx(w,{colSpan:1}),e.jsx(xe,{colSpan:2,children:"Flow (per minute)"}),e.jsx(xe,{colSpan:1,align:"right",children:"Total"}),e.jsx(xe,{colSpan:1,align:"right",children:"Per array"}),e.jsx(xe,{colSpan:1,align:"right",children:"Per facility"})]}),be=r=>{const{data:n,placement:t}=r,{materialFlowPerMinutePerFacility:l,productFlowPerMinutePerFacility:i}=n,{facilitiesNeeded:o,facilitiesPerArray:a}=t,s=Object.entries(l).map((([r,n],t)=>e.jsx(ye,{label:r,perFacility:-n,perArray:-n*o,perTotal:-n*a},`m-${r}-${t}`))),c=Object.entries(i).map((([r,n],t)=>e.jsx(ye,{label:r,perFacility:n,perArray:n*o,perTotal:n*a},`prod-${r}-${t}`)));return e.jsx(ee,{square:!0,elevation:2,children:e.jsx(I,{children:e.jsxs(N,{children:[e.jsx(A,{children:e.jsx(ge,{})}),e.jsxs(O,{children:[s,c]})]})})})},Ce=n=>{const{placement:t}=n,{current:l}=r.useRef([{icon:e.jsx(k,{color:"secondary"}),render:e=>e.facilitiesPerArray,label:"Facilities per array"},{icon:e.jsx(k,{color:"secondary"}),render:e=>e.arraysNeeded,label:"Arrays needed"},{icon:e.jsx(k,{color:"secondary"}),render:e=>e.facilitiesNeeded,label:"Total facilities needed"},{icon:e.jsx(k,{color:"secondary"}),render:e=>e.leftoverFacilities,label:"Leftover facilities"}]),i=l.map((({icon:r,label:n,render:l})=>e.jsxs(E,{disableGutters:!0,children:[e.jsx(M,{children:r}),e.jsx(R,{primary:n,secondary:l(t)})]},n)));return e.jsx(ee,{square:!0,elevation:2,children:e.jsxs($,{dense:!0,disablePadding:!0,children:[e.jsx(_,{disableGutters:!0,disableSticky:!0,children:"Placement"}),i]})})},Se=n=>{const{recipe:t}=n,{current:l}=r.useRef([{icon:e.jsx(W,{color:"secondary"}),render:e=>`${e.cycleTimeSecond} s`,label:"Cycle time"},{icon:e.jsx(D,{color:"secondary"}),render:e=>e.speedupOnly?"No":"Yes",label:"Extra products bonus"},{icon:e.jsx(G,{color:"secondary"}),render:e=>Object.entries(e.materialRecord).map((([e,r])=>`${r} ${e}`)),label:"Materials"},{icon:e.jsx(z,{color:"secondary"}),render:e=>Object.entries(e.productRecord).map((([e,r])=>`${r} ${e}`)),label:"Products"}]),i=l.map((({icon:r,label:n,render:l})=>e.jsxs(E,{disableGutters:!0,children:[e.jsx(M,{children:r}),e.jsx(R,{primary:n,secondary:l(t)})]},n)));return e.jsx(ee,{square:!0,elevation:2,children:e.jsxs($,{dense:!0,disablePadding:!0,children:[e.jsx(_,{disableGutters:!0,disableSticky:!0,children:"Recipe Information"}),i]})})},ve=n=>{const{proliferator:t}=n,{current:l}=r.useRef([{icon:e.jsx(W,{color:"secondary"}),render:e=>`${je(100*(e.cycleMultiplier-1))}%`,label:"Bonus cycle speed"},{icon:e.jsx(W,{color:"secondary"}),render:e=>`${je(100*(e.productMultiplier-1))}%`,label:"Bonus products per cycle"},{icon:e.jsx(U,{color:"secondary"}),render:e=>`${je(100*(e.workConsumptionMultiplier-1))}%`,label:"Additional work consumption"}]),i=l.map((({icon:r,label:n,render:l})=>e.jsxs(E,{disableGutters:!0,children:[e.jsx(M,{children:r}),e.jsx(R,{primary:n,secondary:l(t)})]},n)));return e.jsx(ee,{square:!0,elevation:2,children:e.jsxs($,{dense:!0,disablePadding:!0,children:[e.jsx(_,{disableGutters:!0,disableSticky:!0,children:"Proliferator effects"}),i]})})},Me=n=>{const{facility:t}=n,{current:l}=r.useRef([{icon:e.jsx(q,{color:"secondary"}),render:e=>e.label,label:"Name"},{icon:e.jsx(L,{color:"secondary"}),render:e=>e.recipeType,label:"Category"},{icon:e.jsx(W,{color:"secondary"}),render:e=>`${je(100*e.cycleMultiplier)}%`,label:"Cycle speed"},{icon:e.jsx(X,{color:"secondary"}),render:e=>e.connectionCount,label:"Sorter connections"},{icon:e.jsx(U,{color:"secondary"}),render:e=>`${je(e.workConsumptionMW)} MW`,label:"Work comsumption"},{icon:e.jsx(U,{color:"secondary"}),render:e=>`${je(e.idleConsumptionMW)} MW`,label:"Idle comsumption"}]),i=l.map((({icon:r,label:n,render:l})=>e.jsxs(E,{disableGutters:!0,children:[e.jsx(M,{children:r}),e.jsx(R,{primary:n,secondary:l(t)})]},n)));return e.jsx(ee,{square:!0,elevation:2,children:e.jsxs($,{dense:!0,disablePadding:!0,children:[e.jsx(_,{disableGutters:!0,disableSticky:!0,children:"Facility information"}),i]})})},Re=r=>{const{data:n,placement:t}=r;return e.jsx(F,{children:e.jsxs(f,{container:!0,spacing:2,children:[e.jsxs(f,{item:!0,xs:12,md:6,display:"flex",flexDirection:"column",gap:2,children:[e.jsx(Ce,{placement:t}),e.jsx(Se,{recipe:n.recipe})]}),e.jsxs(f,{item:!0,xs:12,md:6,display:"flex",flexDirection:"column",gap:2,children:[e.jsx(Me,{facility:n.facility}),e.jsx(ve,{proliferator:n.proliferator})]})]})})},Pe=()=>e.jsxs(T,{children:[e.jsx(xe,{colSpan:3,children:"Power consumption (MW)"}),e.jsx(xe,{colSpan:1,align:"right",children:"Total"}),e.jsx(xe,{colSpan:1,align:"right",children:"Per array"}),e.jsx(xe,{colSpan:1,align:"right",children:"Per facility"})]}),we=r=>{const{data:{workUsageMWPerFacility:n,idleUsageMWPerFacility:t},placement:{facilitiesNeeded:l,facilitiesPerArray:i}}=r,o=[-n*l,-n*i,-n].map(((r,n)=>e.jsx(w,{colSpan:1,align:"right",children:je(r)},`supply-${n}`))),a=[-t*l,-t*i,-t].map(((r,n)=>e.jsx(w,{colSpan:1,align:"right",children:je(r)},`power-${n}`)));return e.jsx(ee,{square:!0,elevation:2,children:e.jsx(I,{children:e.jsxs(N,{children:[e.jsx(A,{children:e.jsx(Pe,{})}),e.jsxs(O,{children:[e.jsxs(T,{children:[e.jsx(w,{colSpan:3,children:"Work"}),o]}),e.jsxs(T,{children:[e.jsx(w,{colSpan:3,children:"Idle"}),a]})]})]})})})},Ie=(e,r,n)=>{const t=Ne(e)??r;return t>n?n:t<r?r:t},Ne=e=>{const r=Number.parseInt(e);return Number.isNaN(r)?null:r},Ae=e=>({materialFlowPerMinutePerFacility:(e=>{const{facility:r,recipe:n,proliferator:t,proliferatorSprayCount:l}=e,{cycleTimeSecond:i,materialRecord:o}=n,a=60/i*r.cycleMultiplier*t.cycleMultiplier,s={};for(const d in o)s[d]=o[d]*a;const c=Ie(l,0,Number.MAX_SAFE_INTEGER);if(c>0&&t.sprayCount>0){let e=0;for(const t of Object.values(n.materialRecord))e+=a*t;let r=0;for(const l of Object.values(n.productRecord))r+=a*l*t.productMultiplier;s[`${t.label} (materials)`]=e/c,s[`${t.label} (products)`]=r/c}return s})(e),productFlowPerMinutePerFacility:(e=>{const{facility:r,recipe:n,proliferator:t}=e,{cycleTimeSecond:l,productRecord:i}=n,o=60/l*r.cycleMultiplier*t.cycleMultiplier,a={};for(const s in i)a[s]=i[s]*o*t.productMultiplier;return a})(e)}),Oe=e=>{let r=0;r="constraint"===e.computeMode?((e,r)=>{const{facility:n,recipe:t,proliferator:l}=e,i={};for(const[s,c]of Object.entries(r))i[s]=Ie(c,0,Number.MAX_SAFE_INTEGER);if(Object.values(i).every((e=>0===e)))return 0;const o=60/t.cycleTimeSecond*n.cycleMultiplier*l.cycleMultiplier;let a=0;for(const[s,c]of Object.entries(t.materialRecord)){const e=c*o,r=i[s]/e;(r>0&&0===a||r<a)&&(a=r)}return a})(e,e.constraint):((e,r)=>{const{facility:n,proliferator:t,recipe:l}=e,i={};for(const[s,c]of Object.entries(r))i[s]=Ie(c,0,Number.MAX_SAFE_INTEGER);if(Object.values(i).every((e=>0===e)))return 0;const o=60/l.cycleTimeSecond*n.cycleMultiplier*t.cycleMultiplier;let a=0;for(const[s,c]of Object.entries(l.productRecord)){const e=c*o*t.productMultiplier,r=i[s]/e;r>a&&(a=r)}return a})(e,e.capacity);const n=(e=>{const{flowrate:r,facility:n,recipe:t,proliferator:l}=e,i={};for(const c in r)i[c]=Ie(r[c],0,Number.MAX_SAFE_INTEGER);const o=60/t.cycleTimeSecond*n.cycleMultiplier*l.cycleMultiplier;let a=0;for(const c in t.materialRecord){const e=i[c]/(i[c]*o);(0===a&&e>0||e<a)&&(a=e)}let s=0;for(const c in t.productRecord){const e=i[c]/(i[c]*o*l.productMultiplier);(0===s&&e>0||e<s)&&(s=e)}return Math.min(a,s)})(e);let t=0;return n>0&&(t=Math.floor(r/n),r-=t*n),{facilitiesNeeded:r,facilitiesPerArray:n,arraysNeeded:t,leftoverFacilities:0}},Te=e=>{const r=(e=>{const{sorter:r,facility:n}=e;let t=0;for(const l in r){const e=ae(l);void 0!==e&&(t+=Ie(r[l],0,Number.MAX_SAFE_INTEGER)*e.idleConsumptionMW)}return n.idleConsumptionMW+t})(e),n=(e=>{const{facility:r,proliferator:n,sorter:t}=e;let l=0;for(const i in t){const e=ae(i);void 0!==e&&(l+=Ie(t[i],0,Number.MAX_SAFE_INTEGER)*e.workConsumptionMW)}return r.workConsumptionMW*n.workConsumptionMultiplier+l})(e);return{idleUsageMWPerFacility:r,workUsageMWPerFacility:n}},Fe="facility",ke="recipe",Ee="proliferator",$e="sorter",_e="flowrate",We="proliferatorSprayCount",De="computeMode",Ge="constraint",ze="capacity",Ue=e=>{const r=localStorage.getItem(e);if(null===r)return null;const n=(e=>{try{return JSON.parse(e)}catch(r){return void console.warn(r)}})(r);if(null===n||"object"!=typeof n)return null;for(const l in n)if("string"!=typeof l)return null;const t=n;for(const l in t){const e=t[l];if("string"!=typeof e)return null;if(""!==e&&null===Ne(e))return null}return t},qe=()=>{const e=localStorage.getItem(De);return null===e||"0"!==e&&"1"!==e?null:e},Le=()=>{const e=localStorage.getItem(We);if(null===e)return null;if(""===e)return"";const r=Ne(e);return null===r||r<0?null:r.toString()},Xe=(e,r)=>{const n=localStorage.getItem(e);return null===n||"string"!=typeof n?null:r(n)},Be=()=>Xe(Fe,le),Je=()=>Xe(ke,ie),Ve=()=>Xe(Ee,oe),He=(e,n)=>{const[t,l]=r.useState(n);return[t,r=>{l(r),localStorage.setItem(e,r.label)}]},Ke=(e,n)=>{const[t,l]=r.useState(n);return[t,(r,n)=>{l((t=>{const l={...t};return l[r]=n,localStorage.setItem(e,JSON.stringify(l)),l}))},r=>{l(r),localStorage.setItem(e,JSON.stringify(r))},r=>{l((n=>{const t=r(n);return localStorage.setItem(e,JSON.stringify(t)),t}))}]},Ye=e=>{const[r,,n,t]=Ke(_e,e);return[r,(e,r,n)=>{t((t=>{const l={...t};if(""===r)return l[e]="",l;const i=((e,r,n)=>{let t=0;for(const l in r)l!==e&&(t+=Ie(r[l],0,n-t));return t})(e,t,n),o=Ie(r,0,n-i);return l[e]=o.toString(),l}))},n]},Ze=e=>{const[r,,,n]=Ke($e,e);return[r,(e,r,t)=>{n((n=>{const l={...n};if(""===r)return l[e]="",l;const i=((e,r,n)=>{let t=0;for(const l in r)l!==e&&(t+=Ie(r[l],0,n-t));return t})(e,n,t),o=Ie(r,0,t-i);return l[e]=o.toString(),l}))}]},Qe=(e,n)=>{const[t,l]=r.useState(n);return[t,r=>{l(r),localStorage.setItem(e,r)}]},er=()=>{const{current:e}=r.useRef((()=>{const e={facility:le("Arc Smelter"),recipe:ie("Copper Ingot"),proliferator:oe("None"),proliferatorSprayCount:"12",sorter:{"Sorter Mk.I":"","Sorter Mk.II":"","Sorter Mk.III":"","Pile Sorter":""},flowrate:{"Copper Ore":"","Copper Ingot":""},capacity:{"Copper Ingot":""},constraint:{"Copper Ore":""},computeMode:"0"},r=qe();if(!r)return e;const n=Be();if(!n)return e;const t=Je();if(!t||t.recipeType!==n.recipeType)return e;const l=Ve();if(!l||l.mode===a.EXTRA_PRODUCTS&&t.speedupOnly)return e;const i=Le();if(!i)return e;const o=Ue($e);if(!o)return e;const s=Ue(Ge);if(null===s)return e;for(const a in s)if(void 0===t.materialRecord[a])return e;const c=Ue(ze);if(null===c)return e;for(const a in c)if(void 0===t.productRecord[a])return e;const d=Ue(_e);if(null===d)return e;for(const a in d)if(void 0===t.materialRecord[a]&&void 0===t.productRecord[a])return e;for(const a in t.materialRecord){if(void 0===d[a])return e;if(void 0===s[a])return e}for(const a in t.productRecord){if(void 0===d[a])return e;if(void 0===c[a])return e}return{facility:n,recipe:t,proliferator:l,proliferatorSprayCount:i,sorter:o,flowrate:d,capacity:c,constraint:s,computeMode:r}})()),[n,t]=He(Fe,e.facility),[o,s]=He(ke,e.recipe),[c,d]=Ze(e.sorter),[p,u]=He(Ee,e.proliferator),[f,h]=Qe(We,e.proliferatorSprayCount),[x,m,j]=Ye(e.flowrate),[y,g]=Qe(De,e.computeMode),[b,C,S]=Ke(Ge,e.constraint),[v,M,R]=Ke(ze,e.capacity),P=e=>{if(s(e),e.speedupOnly&&"Extra Products"===p.mode){const e=(e=>{for(const r of i.values())if(r.mode===e)return r})(a.PRODUCTION_SPEEDUP);void 0!==e&&u(e)}const r={},n={},t={};for(const l in e.materialRecord)n[l]="",r[l]="0";for(const l in e.productRecord)t[l]="",r[l]="0";j(r),R(t),S(n)};return{data:{facility:n,flowrate:x,proliferator:p,proliferatorSprayCount:f,recipe:o,sorter:c,capacity:v,computeMode:y,constraint:b},handlers:{handleConstraintUpdate:C,handleCapacityUpdate:M,handleComputeModeChange:g,handleFacilityChange:e=>{t(e);const r=(e=>{for(const r of l.values())if(r.recipeType===e)return r})(e.recipeType);void 0!==r&&P(r)},handleProliferatorChange:e=>{u(e),h(e.sprayCount.toString())},handleRecipeChange:P,handleSorterChange:(e,r)=>{const{connectionCount:t}=n;d(e,r,t)},handleFlowrateChange:(e,r)=>{const{connectionCount:t}=n;m(e,r,7200*t)},handleProliferatorSprayCountChange:h}}},rr=r=>{const n=B(),t=J(n.breakpoints.down("md")),{slotMain:l,slotSide:i}=r;return t?e.jsxs(ee,{square:!0,elevation:0,children:[e.jsx(ee,{square:!0,elevation:2,children:i}),l]}):e.jsx(d,{square:!0,elevation:0,children:e.jsxs(f,{container:!0,columns:10,children:[e.jsx(f,{item:!0,md:!0,padding:4,height:"100vh",overflow:"auto",children:l}),e.jsx(f,{item:!0,md:3,height:"100vh",overflow:"auto",children:e.jsx(ee,{square:!0,elevation:2,children:i})})]})})},nr=()=>{const{data:r,handlers:n}=er(),t=Ae(r),l=Te(r),i=Oe(r);return e.jsx(rr,{slotMain:e.jsxs(y,{spacing:2,children:[e.jsx(ne,{data:r,handlers:n}),e.jsx(be,{data:t,placement:i}),e.jsx(we,{placement:i,data:l}),e.jsx(Re,{data:r,placement:i})]}),slotSide:e.jsx(he,{data:r,handlers:n})})},tr=V({components:{MuiCssBaseline:{styleOverrides:"img {\n\t\t\t\t\tloading: lazy;\n\t\t\t\t\twidth: auto;\n\t\t\t\t\theight: 40px;\n\t\t\t}"}},palette:{mode:"dark",text:{primary:H("#fff",.87)},primary:{main:"#7ABBAD"},secondary:{main:"#C8AA81"},background:{paper:"#181D22"}}}),lr=()=>e.jsxs(K,{theme:tr,children:[e.jsx(Y,{}),e.jsx(nr,{})]});n(document.getElementById("root")).render(e.jsx(r.StrictMode,{children:e.jsx(lr,{})}));
