import{r as b,j as e}from"./react-c7x3VyAv.js";import{c as Ce}from"./react-dom-nwdlp_2f.js";import{c as be,a as Oe,T as xe,M as oe,I as ce,u as Me,b as Re,S as O,P as v,G as T,D as Ie,d as h,e as w,f as A,R as $,g as le,h as ae,i as de,j as F,k as C,l as pe,m as _,A as ue,L as W,n as y,o as f,F as z,p as g,q as Pe,C as Ne,r as B,U as Te,B as G,s as Fe,t as ve,v as Le,w as Ee,x as ke}from"./@mui-Ue6kmDWl.js";import{f as X,F as we}from"./facility.mts-_VB0zU-w.js";import{r as Y,a as q}from"./recipes-ZslLi6jF.js";import{p as H,P as me,a as je}from"./proliferator.mts-9Q72QBkP.js";import{s as Ae}from"./sorter.mts-RHRkJXms.js";/* empty css                    */import"./hoist-non-react-statics-bbVbV8Pa.js";import"./scheduler-jfnXNWZW.js";import"./prop-types-pmxPFTpu.js";import"./react-is-D0-Nh74l.js";import"./@babel-R4VyUtW_.js";import"./@emotion-KQWZ46Z_.js";import"./stylis-UTZzoVRx.js";import"./clsx-Zbgk8kpT.js";import"./react-transition-group-xc2LJcsj.js";import"./@popperjs-v-la0Vhf.js";import"./ingredient.mts-nBNVauyB.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&c(u)}).observe(document,{childList:!0,subtree:!0});function o(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function c(r){if(r.ep)return;r.ep=!0;const a=o(r);fetch(r.href,a)}})();const $e=be({components:{MuiTypography:{styleOverrides:{root:{userSelect:"none"}}}},palette:{mode:"dark",text:{primary:Oe("#fff",.87)}}}),Q=i=>{const{sortOptions:n,label:o,value:c,onValueChange:r,options:a,disabledOptions:u}=i,S=b.useMemo(()=>n?a.sort():a,[a,n]),d=b.useMemo(()=>n?u.sort():u,[u,n]);return e.jsxs(xe,{select:!0,fullWidth:!0,label:o,value:c,onChange:j=>r(j.target.value),children:[S.filter(j=>!d.includes(j)).map(j=>e.jsx(oe,{value:j,children:j},j)),d.map(j=>e.jsx(oe,{disabled:!0,value:j,children:j},j))]})},D=i=>{const{disabled:n,maxLength:o,prefix:c,suffix:r,label:a,value:u,onChange:S}=i,d=j=>{const l=j.target.value.slice(0,o).normalize();S(l)};return e.jsx(xe,{fullWidth:!0,disabled:n,label:a,value:u,onChange:d,InputProps:{startAdornment:e.jsx(ce,{position:"start",children:c}),endAdornment:e.jsx(ce,{position:"end",children:r})}})},E=(i,n,o)=>{const c=Number.parseInt(i);return Number.isNaN(c)?n:c>o?o:c<n?n:c},k=i=>i.reduce((n,o)=>n+o,0),M=i=>Number.parseFloat(i.toPrecision(9)).toPrecision(),Z=(i,n,o)=>{const c=localStorage.getItem(i);if(c===null)return o;try{return n(JSON.parse(c))}catch{return o}},We=i=>i===12?"Proliferator Mk.I":i===24?"Proliferator Mk.II":i===60?"Proliferator Mk.III":"None",ze=(i,n,o,c,r,a)=>{const u=Object.fromEntries(Object.entries(c).map(([l,I])=>{let p=Number.parseInt(I);return(Number.isNaN(p)||p===0)&&(p=360),[l,p]})),S=60/i*n,d=Math.min(...Object.entries(r).map(([l,I])=>{const p=I*S;return u[l]/p})),j=Math.min(...Object.entries(a).map(([l,I])=>{const p=I*S*o;return u[l]/p}));return Math.min(d,j)},Be=(i,n,o,c,r)=>{const a=Object.fromEntries(Object.entries(r).map(([d,j])=>{let l=Number.parseInt(j);return Number.isNaN(l)&&(l=0),[d,l]}));if(Object.values(a).every(d=>d===0))return 0;const u=60/i*n;return Math.max(...Object.entries(c).map(([d,j])=>{const l=j*u*o;return a[d]/l}))},he=i=>{const n=Object.fromEntries(Object.entries(i).map(([c,r])=>{let a=Number.parseInt(r);return Number.isNaN(a)&&(a=0),[c,a]}));return k(Object.entries(n).map(([c,r])=>Ae(c).idleConsumptionMW*r))},De=(i,n)=>{const o=he(n);return i+o},Je=(i,n,o)=>{const c=he(o);return i*n+c},Ue=(i,n,o,c,r,a,u)=>{const S=60/i*n,d=Object.fromEntries(Object.entries(c).map(([l,I])=>[l,I*S])),j=Number.parseInt(u);return!Number.isNaN(j)&&j>0&&(d[`${a} (on materials)`]=k(Object.values(c).map(l=>S*l))/j,d[`${a} (on products)`]=k(Object.values(r).map(l=>S*l*o))/j),d},Ve=(i,n,o,c)=>{const r=60/i*n;return Object.fromEntries(Object.entries(c).map(([u,S])=>[u,S*r*o]))},_e=i=>{const{slotSide:n,children:o,slotMain:c}=i;return e.jsxs(O,{padding:2,spacing:2,children:[e.jsx(v,{sx:{padding:2},children:n}),c,b.Children.toArray(o).map((r,a)=>e.jsx(v,{sx:{padding:2},children:r},`main-col-item-${a}`))]})},Ge=i=>{const{children:n,slotMain:o,slotSide:c}=i;return e.jsxs(T,{container:!0,height:"100vh",children:[e.jsx(T,{item:!0,md:8,padding:2,height:"100%",overflow:"auto",sx:{scrollbarWidth:"thin"},children:e.jsxs(T,{container:!0,spacing:2,children:[e.jsx(T,{item:!0,md:12,children:o}),[0,1].map(r=>e.jsx(T,{item:!0,md:6,children:e.jsx(O,{spacing:2,children:b.Children.toArray(n).filter((a,u)=>u%2===r).map((a,u)=>e.jsx(v,{sx:{padding:2},children:a},`main-col-${r}-item-${u}`))})},`main-col-${r}`))]})}),e.jsx(T,{item:!0,md:4,height:"100%",overflow:"auto",children:e.jsx(v,{sx:{padding:2},children:c})})]})},Xe=i=>{const{slotSide:n,slotMain:o,children:c}=i,r=Me();return Re(r.breakpoints.down("sm"))?e.jsx(_e,{children:c,slotMain:o,slotSide:n}):e.jsx(Ge,{children:c,slotMain:o,slotSide:n})},Ye=(i,n)=>{const[o,c]=b.useState(()=>{const r=localStorage.getItem(n);if(r===null)return i;try{return JSON.parse(r)}catch{return i}});return b.useEffect(()=>{localStorage.setItem(n,JSON.stringify(o))},[n,o]),{content:o,setContent:c}},K=(i,n)=>{const[o,c]=b.useState(()=>{const r=localStorage.getItem(n);if(r===null)return i;try{return JSON.parse(r)}catch{return i}});return b.useEffect(()=>{localStorage.setItem(n,JSON.stringify(o))},[o,n]),{content:o,setContent:c}},qe=()=>{const{content:i,setContent:n}=K({"Sorter Mk.I":"0","Sorter Mk.II":"0","Sorter Mk.III":"0","Pile Sorter":"0"},"sorters"),{content:o,setContent:c}=K({},"flowrates"),{content:r,setContent:a}=K({},"desiredProduction"),{content:u,setContent:S}=Ye("0","sprayCount"),[d,j]=b.useState(()=>Z("activeFacility",X,X("Arc Smelter"))),[l,I]=b.useState(()=>Z("activeRecipe",Y,Y("Copper Ingot"))),[p,ye]=b.useState(()=>Z("activeProlif",H,H("None"))),fe=t=>{const s=X(t);if(j(s),localStorage.setItem("activeFacility",JSON.stringify(s.label)),l.recipeType===s.recipeType)return;let x="Uh oh";const m=Object.values(q).filter(({recipeType:R})=>R===s.recipeType).map(({label:R})=>R);m.length>0&&(x=m[0]),ee(x)},ee=t=>{const s=Y(t);s.speedupOnly&&p.mode===je.EXTRA_PRODUCTS&&te("None"),I(s),localStorage.setItem("activeRecipe",JSON.stringify(s.label)),a(x=>{const m={};for(const R of Object.keys(s.productRecord))m[R]=x[R]??"0";return m}),c(()=>{const x={};for(const m of Object.keys(s.materialRecord))x[m]="360";for(const m of Object.keys(s.productRecord))x[m]="360";return x})},te=t=>{const s=H(t);S(s.sprayCount.toString()),ye(s),localStorage.setItem("activeProlif",JSON.stringify(s.label))},re=(t,s)=>{a(x=>{const m={...x};return s===""?(m[t]="",m):(m[t]=E(s,0,1e7).toString(),m)})},ne=(t,s)=>{c(x=>{const m={...x};if(s==="")return m[t]="",m;const R=d.connectionCount*7200,L=k(Object.entries(x).filter(([V])=>V!==t).map(([,V])=>E(V,360,R)));return m[t]=E(s,0,R-L).toString(),m})},se=(t,s)=>{n(x=>{const m={...x};if(s==="")return m[t]="",m;const R=k(Object.entries(x).filter(([L])=>L!==t).map(([,L])=>E(L,0,d.connectionCount)));return m[t]=E(s,0,d.connectionCount-R).toString(),m})},ge=We(p.sprayCount),N=b.useMemo(()=>Be(l.cycleTimeSecond,d.cycleMultiplier*p.cycleMultiplier,p.productMultiplier,l.productRecord,r),[l.cycleTimeSecond,d.cycleMultiplier,p.cycleMultiplier,p.productMultiplier,l.productRecord,r]),P=b.useMemo(()=>ze(l.cycleTimeSecond,d.cycleMultiplier*p.cycleMultiplier,p.productMultiplier,o,l.materialRecord,l.productRecord),[l.cycleTimeSecond,d.cycleMultiplier,p.cycleMultiplier,p.productMultiplier,o,l.materialRecord,l.productRecord]),ie=P<=0?0:Math.floor(N/P),Se=N-ie*P,J=Je(d.workConsumptionMW,p.workConsumptionMultiplier,i),U=De(d.idleConsumptionMW,i);return e.jsxs(Xe,{slotSide:e.jsxs(O,{spacing:4,divider:e.jsx(Ie,{flexItem:!0,variant:"fullWidth"}),children:[e.jsxs(O,{spacing:2,children:[e.jsx(h,{children:"Manufacturing"}),e.jsx(Q,{sortOptions:!0,label:"Facility",value:d.label,onValueChange:fe,options:Object.keys(we),disabledOptions:[]}),e.jsx(Q,{sortOptions:!0,label:"Recipe",value:l.label,onValueChange:ee,options:Object.keys(q),disabledOptions:Object.values(q).filter(t=>t.recipeType!==d.recipeType).map(t=>t.label)})]}),e.jsxs(O,{spacing:2,children:[e.jsx(h,{children:"Production target"}),Object.entries(r).map(([t,s])=>e.jsxs(O,{spacing:2,direction:"row",alignItems:"center",justifyContent:"left",children:[e.jsx(D,{label:t,maxLength:8,suffix:"/min",value:s,onChange:x=>re(t,x)}),e.jsx(w,{disabled:s==="0",onClick:()=>re(t,"0"),children:e.jsx(A,{title:"Reset",children:e.jsx($,{})})})]},t))]}),e.jsxs(O,{spacing:2,children:[e.jsx(h,{children:"Proliferation"}),e.jsx(Q,{label:"Proliferator",value:p.label,onValueChange:te,options:Object.keys(me),disabledOptions:Object.values(me).filter(t=>l.speedupOnly&&t.mode===je.EXTRA_PRODUCTS).map(t=>t.label)}),e.jsxs(O,{spacing:2,direction:"row",alignItems:"center",justifyContent:"left",children:[e.jsx(D,{disabled:p.sprayCount<=0,maxLength:9,suffix:"sprays",label:"Uses",value:u,onChange:S}),e.jsx(w,{disabled:p.sprayCount<=0||p.sprayCount.toString()===u,onClick:()=>S(p.sprayCount.toString()),children:e.jsx(A,{title:"Reset",children:e.jsx($,{})})})]})]}),e.jsxs(O,{spacing:2,children:[e.jsx(h,{children:"Transport capacity"}),Object.entries(o).map(([t,s])=>e.jsxs(O,{spacing:2,direction:"row",alignItems:"center",justifyContent:"left",children:[e.jsx(D,{label:t,maxLength:8,suffix:"/min",value:s,onChange:x=>ne(t,x)}),e.jsx(w,{disabled:s==="360",onClick:()=>ne(t,"360"),children:e.jsx(A,{title:"Reset",children:e.jsx($,{})})})]},t))]}),e.jsxs(O,{spacing:2,children:[e.jsx(h,{children:"Sorter connections"}),Object.entries(i).map(([t,s])=>e.jsxs(O,{spacing:2,direction:"row",alignItems:"center",justifyContent:"left",children:[e.jsx(D,{label:t,maxLength:6,suffix:`/${d.connectionCount}`,value:s,onChange:x=>se(t,x)}),e.jsx(w,{disabled:s==="0",onClick:()=>se(t,"0"),children:e.jsx(A,{title:"Reset",children:e.jsx($,{})})})]},t))]})]}),slotMain:e.jsxs(O,{spacing:2,children:[e.jsx(v,{sx:{padding:2},children:e.jsx(le,{children:e.jsxs(ae,{children:[e.jsx(de,{children:e.jsxs(F,{children:[e.jsx(C,{colSpan:3,children:e.jsx(h,{color:"primary",children:"Item (per minute)"})}),e.jsx(C,{colSpan:1,align:"right",children:e.jsx(h,{color:"primary",children:"Total"})}),e.jsx(C,{colSpan:1,align:"right",children:e.jsx(h,{color:"primary",children:"Per Array"})}),e.jsx(C,{colSpan:1,align:"right",children:e.jsx(h,{color:"primary",children:"Per Facility"})})]})}),e.jsxs(pe,{children:[Object.entries(Ue(l.cycleTimeSecond,p.cycleMultiplier*d.cycleMultiplier,p.productMultiplier,l.materialRecord,l.productRecord,ge,u)).map(([t,s])=>e.jsxs(F,{children:[e.jsx(C,{colSpan:3,children:t}),[s*N,s*P,s].map((x,m)=>e.jsx(C,{colSpan:1,children:e.jsxs(h,{display:"flex",alignItems:"center",justifyContent:"flex-end",fontSize:"inherit",children:[e.jsx(_,{fontSize:"inherit"}),M(x)]})},`demand-${m}`))]},t)),Object.entries(Ve(l.cycleTimeSecond,p.cycleMultiplier*d.cycleMultiplier,p.productMultiplier,l.productRecord)).map(([t,s])=>e.jsxs(F,{children:[e.jsx(C,{colSpan:3,children:t}),[s*N,s*P,s].map((x,m)=>e.jsx(C,{colSpan:1,children:e.jsxs(h,{display:"flex",alignItems:"center",justifyContent:"flex-end",fontSize:"inherit",children:[e.jsx(ue,{fontSize:"inherit"}),M(x)]})},`supply-${m}`))]},t))]})]})})}),e.jsx(v,{sx:{padding:2},children:e.jsx(le,{children:e.jsxs(ae,{children:[e.jsx(de,{children:e.jsxs(F,{children:[e.jsx(C,{colSpan:3,children:e.jsx(h,{color:"primary",children:"Power consumption (MW)"})}),e.jsx(C,{colSpan:1,align:"right",children:e.jsx(h,{color:"primary",children:"Total"})}),e.jsx(C,{colSpan:1,align:"right",children:e.jsx(h,{color:"primary",children:"Per array"})}),e.jsx(C,{colSpan:1,align:"right",children:e.jsx(h,{color:"primary",children:"Per facility"})})]})}),e.jsxs(pe,{children:[e.jsxs(F,{children:[e.jsx(C,{colSpan:3,children:"Work"}),[J*N,J*P,J].map((t,s)=>e.jsx(C,{colSpan:1,children:e.jsxs(h,{display:"flex",alignItems:"center",justifyContent:"flex-end",fontSize:"inherit",children:[e.jsx(_,{fontSize:"inherit"}),M(t)]})},`supply-${s}`))]}),e.jsxs(F,{children:[e.jsx(C,{colSpan:3,children:"Idle"}),[U*N,U*P,U].map((t,s)=>e.jsx(C,{colSpan:1,children:e.jsxs(h,{display:"flex",alignItems:"center",justifyContent:"flex-end",fontSize:"inherit",children:[e.jsx(_,{fontSize:"inherit"}),M(t)]})},`supply-${s}`))]})]})]})})})]}),children:[e.jsxs(W,{subheader:"Layout",dense:!0,children:[e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(z,{})}),e.jsx(g,{primary:P,secondary:"Facilities per array"})]}),e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(z,{})}),e.jsx(g,{primary:ie,secondary:"Arrays"})]}),e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(z,{})}),e.jsx(g,{primary:N,secondary:"Total facilities"})]}),e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(z,{})}),e.jsx(g,{primary:Se,secondary:"Leftover facilities"})]})]}),e.jsxs(W,{subheader:"Facility information",dense:!0,children:[e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(Pe,{})}),e.jsx(g,{primary:d.label,secondary:"Name"})]}),e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(Ne,{})}),e.jsx(g,{primary:d.recipeType,secondary:"Category"})]}),e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(B,{})}),e.jsx(g,{primary:`${M(d.cycleMultiplier*100)}%`,secondary:"Cycle speed"})]}),e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(Te,{})}),e.jsx(g,{primary:d.connectionCount,secondary:"Sorter connections"})]}),e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(G,{})}),e.jsx(g,{primary:`${M(d.workConsumptionMW)} MW`,secondary:"Work comsumption"})]}),e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(G,{})}),e.jsx(g,{primary:`${M(d.idleConsumptionMW)} MW`,secondary:"Idle comsumption"})]})]}),e.jsxs(W,{subheader:"Recipe infomation",dense:!0,children:[e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(B,{})}),e.jsx(g,{primary:`${M(l.cycleTimeSecond)} s`,secondary:"Cycle time"})]}),e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(Fe,{})}),e.jsx(g,{primary:l.speedupOnly?"No":"Yes",secondary:"Extra products bonus"})]}),e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(ve,{})}),e.jsx(g,{primary:Object.entries(l.materialRecord).map(([t,s])=>e.jsx(h,{fontSize:"inherit",children:`${s} ${t}`},t)),secondary:"Materials"})]}),e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(ue,{})}),e.jsx(g,{primary:Object.entries(l.productRecord).map(([t,s])=>e.jsx(h,{fontSize:"inherit",children:`${s} ${t}`},t)),secondary:"Products"})]})]}),e.jsxs(W,{dense:!0,subheader:"Proliferator effects",children:[e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(G,{})}),e.jsx(g,{primary:`${M((p.workConsumptionMultiplier-1)*100)}%`,secondary:"Additional work consumption"})]}),e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(B,{})}),e.jsx(g,{primary:`${M((p.cycleMultiplier-1)*100)}%`,secondary:"Bonus cycle speed"})]}),e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(B,{})}),e.jsx(g,{primary:`${M((p.productMultiplier-1)*100)}%`,secondary:"Bonus products per cycle"})]}),e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(Le,{})}),e.jsx(g,{primary:M(u===""?0:Number.parseInt(u)),secondary:"Sprays"})]})]})]})},He=()=>e.jsxs(Ee,{theme:$e,children:[e.jsx(ke,{}),e.jsx(qe,{})]});Ce.createRoot(document.getElementById("root")).render(e.jsx(b.StrictMode,{children:e.jsx(He,{})}));
//# sourceMappingURL=index-GDmpf6i_.js.map
