import{r as O,j as e}from"./react-c7x3VyAv.js";import{c as Ce}from"./react-dom-nwdlp_2f.js";import{c as be,a as Oe,T as xe,M as oe,I as ce,u as Pe,b as Re,S as b,P as F,G as N,D as Ie,d as h,e as k,f as w,R as A,g as le,h as ae,i as de,j as T,k as C,l as pe,m as _,A as ue,L as $,n as y,o as f,F as W,p as g,q as Me,C as Ne,r as z,U as Te,B as G,s as Fe,t as ve,v as Le,w as Ee,x as ke}from"./@mui-Ue6kmDWl.js";import{f as X,F as we}from"./facility.mts-_VB0zU-w.js";import{r as Y,a as q}from"./recipes-ZslLi6jF.js";import{p as H,P as me,a as je}from"./proliferator.mts-9Q72QBkP.js";import{s as Ae}from"./sorter.mts-RHRkJXms.js";/* empty css                    */import"./hoist-non-react-statics-bbVbV8Pa.js";import"./scheduler-jfnXNWZW.js";import"./prop-types-pmxPFTpu.js";import"./react-is-D0-Nh74l.js";import"./@babel-R4VyUtW_.js";import"./@emotion-KQWZ46Z_.js";import"./stylis-UTZzoVRx.js";import"./clsx-Zbgk8kpT.js";import"./react-transition-group-xc2LJcsj.js";import"./@popperjs-v-la0Vhf.js";import"./ingredient.mts-nBNVauyB.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const m of l.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&c(m)}).observe(document,{childList:!0,subtree:!0});function o(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function c(s){if(s.ep)return;s.ep=!0;const l=o(s);fetch(s.href,l)}})();const $e=be({components:{MuiTypography:{styleOverrides:{root:{userSelect:"none"}}}},palette:{mode:"dark",text:{primary:Oe("#fff",.87)}}}),Q=n=>{const{sortOptions:r,label:o,value:c,onValueChange:s,options:l,disabledOptions:m}=n,S=O.useMemo(()=>r?l.sort():l,[l,r]),d=O.useMemo(()=>r?m.sort():m,[m,r]);return e.jsxs(xe,{select:!0,fullWidth:!0,label:o,value:c,onChange:j=>s(j.target.value),children:[S.filter(j=>!d.includes(j)).map(j=>e.jsx(oe,{value:j,children:j},j)),d.map(j=>e.jsx(oe,{disabled:!0,value:j,children:j},j))]})},B=n=>{const{disabled:r,maxLength:o,prefix:c,suffix:s,label:l,value:m,onChange:S}=n,d=j=>{const a=j.target.value.slice(0,o).normalize();S(a)};return e.jsx(xe,{fullWidth:!0,disabled:r,label:l,value:m,onChange:d,InputProps:{startAdornment:e.jsx(ce,{position:"start",children:c}),endAdornment:e.jsx(ce,{position:"end",children:s})}})},L=(n,r,o)=>{const c=Number.parseInt(n);return Number.isNaN(c)?r:c>o?o:c<r?r:c},E=n=>n.reduce((r,o)=>r+o,0),D=n=>Number.parseFloat(n.toPrecision(9)).toPrecision(),Z=(n,r,o)=>{const c=localStorage.getItem(n);if(c===null)return o;try{return r(JSON.parse(c))}catch{return o}},We=n=>n===12?"Proliferator Mk.I":n===24?"Proliferator Mk.II":n===60?"Proliferator Mk.III":"None",ze=(n,r,o,c,s,l)=>{const m=Object.fromEntries(Object.entries(c).map(([a,R])=>{let p=Number.parseInt(R);return(Number.isNaN(p)||p===0)&&(p=360),[a,p]})),S=60/n*r,d=Math.min(...Object.entries(s).map(([a,R])=>{const p=R*S;return m[a]/p})),j=Math.min(...Object.entries(l).map(([a,R])=>{const p=R*S*o;return m[a]/p}));return Math.min(d,j)},Be=(n,r,o,c,s)=>{const l=Object.fromEntries(Object.entries(s).map(([d,j])=>{let a=Number.parseInt(j);return Number.isNaN(a)&&(a=0),[d,a]}));if(Object.values(l).every(d=>d===0))return 0;const m=60/n*r;return Math.max(...Object.entries(c).map(([d,j])=>{const a=j*m*o;return l[d]/a}))},he=n=>{const r=Object.fromEntries(Object.entries(n).map(([c,s])=>{let l=Number.parseInt(s);return Number.isNaN(l)&&(l=0),[c,l]}));return E(Object.entries(r).map(([c,s])=>Ae(c).idleConsumptionMW*s))},De=(n,r)=>{const o=he(r);return n+o},Je=(n,r,o)=>{const c=he(o);return n*r+c},Ue=(n,r,o,c,s,l,m)=>{const S=60/n*r,d=Object.fromEntries(Object.entries(c).map(([a,R])=>[a,R*S])),j=Number.parseInt(m);return!Number.isNaN(j)&&j>0&&(d[`${l} (on materials)`]=E(Object.values(c).map(a=>S*a))/j,d[`${l} (on products)`]=E(Object.values(s).map(a=>S*a*o))/j),d},Ve=(n,r,o,c)=>{const s=60/n*r;return Object.fromEntries(Object.entries(c).map(([m,S])=>[m,S*s*o]))},_e=(n,r)=>n<=0?0:Math.floor(r/n),Ge=n=>{const{slotSide:r,children:o,slotMain:c}=n;return e.jsxs(b,{padding:2,spacing:2,children:[e.jsx(F,{sx:{padding:2},children:r}),c,O.Children.toArray(o).map((s,l)=>e.jsx(F,{sx:{padding:2},children:s},`main-col-item-${l}`))]})},Xe=n=>{const{children:r,slotMain:o,slotSide:c}=n;return e.jsxs(N,{container:!0,height:"100vh",children:[e.jsx(N,{item:!0,md:8,padding:2,height:"100%",overflow:"auto",sx:{scrollbarWidth:"thin"},children:e.jsxs(N,{container:!0,spacing:2,children:[e.jsx(N,{item:!0,md:12,children:o}),[0,1].map(s=>e.jsx(N,{item:!0,md:6,children:e.jsx(b,{spacing:2,children:O.Children.toArray(r).filter((l,m)=>m%2===s).map((l,m)=>e.jsx(F,{sx:{padding:2},children:l},`main-col-${s}-item-${m}`))})},`main-col-${s}`))]})}),e.jsx(N,{item:!0,md:4,height:"100%",overflow:"auto",children:e.jsx(F,{sx:{padding:2},children:c})})]})},Ye=n=>{const{slotSide:r,slotMain:o,children:c}=n,s=Pe();return Re(s.breakpoints.down("sm"))?e.jsx(Ge,{children:c,slotMain:o,slotSide:r}):e.jsx(Xe,{children:c,slotMain:o,slotSide:r})},qe=(n,r)=>{const[o,c]=O.useState(()=>{const s=localStorage.getItem(r);if(s===null)return n;try{return JSON.parse(s)}catch{return n}});return O.useEffect(()=>{localStorage.setItem(r,JSON.stringify(o))},[r,o]),{content:o,setContent:c}},K=(n,r)=>{const[o,c]=O.useState(()=>{const s=localStorage.getItem(r);if(s===null)return n;try{return JSON.parse(s)}catch{return n}});return O.useEffect(()=>{localStorage.setItem(r,JSON.stringify(o))},[o,r]),{content:o,setContent:c}},He=()=>{const{content:n,setContent:r}=K({"Sorter Mk.I":"0","Sorter Mk.II":"0","Sorter Mk.III":"0","Pile Sorter":"0"},"sorters"),{content:o,setContent:c}=K({},"flowrates"),{content:s,setContent:l}=K({},"desiredProduction"),{content:m,setContent:S}=qe("0","sprayCount"),[d,j]=O.useState(()=>Z("activeFacility",X,X("Arc Smelter"))),[a,R]=O.useState(()=>Z("activeRecipe",Y,Y("Copper Ingot"))),[p,ye]=O.useState(()=>Z("activeProlif",H,H("None"))),fe=t=>{const i=X(t);if(j(i),localStorage.setItem("activeFacility",JSON.stringify(i.label)),a.recipeType===i.recipeType)return;let x="Uh oh";const u=Object.values(q).filter(({recipeType:P})=>P===i.recipeType).map(({label:P})=>P);u.length>0&&(x=u[0]),ee(x)},ee=t=>{const i=Y(t);i.speedupOnly&&p.mode===je.EXTRA_PRODUCTS&&te("None"),R(i),localStorage.setItem("activeRecipe",JSON.stringify(i.label)),l(x=>{const u={};for(const P of Object.keys(i.productRecord))u[P]=x[P]??"0";return u}),c(()=>{const x={};for(const u of Object.keys(i.materialRecord))x[u]="360";for(const u of Object.keys(i.productRecord))x[u]="360";return x})},te=t=>{const i=H(t);S(i.sprayCount.toString()),ye(i),localStorage.setItem("activeProlif",JSON.stringify(i.label))},re=(t,i)=>{l(x=>{const u={...x};return i===""?(u[t]="",u):(u[t]=L(i,0,1e7).toString(),u)})},ne=(t,i)=>{c(x=>{const u={...x};if(i==="")return u[t]="",u;const P=d.connectionCount*7200,v=E(Object.entries(x).filter(([V])=>V!==t).map(([,V])=>L(V,360,P)));return u[t]=L(i,0,P-v).toString(),u})},se=(t,i)=>{r(x=>{const u={...x};if(i==="")return u[t]="",u;const P=E(Object.entries(x).filter(([v])=>v!==t).map(([,v])=>L(v,0,d.connectionCount)));return u[t]=L(i,0,d.connectionCount-P).toString(),u})},ge=We(p.sprayCount),I=Be(a.cycleTimeSecond,d.cycleMultiplier*p.cycleMultiplier,p.productMultiplier,a.productRecord,s),M=ze(a.cycleTimeSecond,d.cycleMultiplier*p.cycleMultiplier,p.productMultiplier,o,a.materialRecord,a.productRecord),ie=_e(M,I),Se=I-ie*M,J=Je(d.workConsumptionMW,p.workConsumptionMultiplier,n),U=De(d.idleConsumptionMW,n);return e.jsxs(Ye,{slotSide:e.jsxs(b,{spacing:4,divider:e.jsx(Ie,{flexItem:!0,variant:"fullWidth"}),children:[e.jsxs(b,{spacing:2,children:[e.jsx(h,{children:"Manufacturing"}),e.jsx(Q,{sortOptions:!0,label:"Facility",value:d.label,onValueChange:fe,options:Object.keys(we),disabledOptions:[]}),e.jsx(Q,{sortOptions:!0,label:"Recipe",value:a.label,onValueChange:ee,options:Object.keys(q),disabledOptions:Object.values(q).filter(t=>t.recipeType!==d.recipeType).map(t=>t.label)})]}),e.jsxs(b,{spacing:2,children:[e.jsx(h,{children:"Production target"}),Object.entries(s).map(([t,i])=>e.jsxs(b,{spacing:2,direction:"row",alignItems:"center",justifyContent:"left",children:[e.jsx(B,{label:t,maxLength:8,suffix:"/min",value:i,onChange:x=>re(t,x)}),e.jsx(k,{disabled:i==="0",onClick:()=>re(t,"0"),children:e.jsx(w,{title:"Reset",children:e.jsx(A,{})})})]},t))]}),e.jsxs(b,{spacing:2,children:[e.jsx(h,{children:"Proliferation"}),e.jsx(Q,{label:"Proliferator",value:p.label,onValueChange:te,options:Object.keys(me),disabledOptions:Object.values(me).filter(t=>a.speedupOnly&&t.mode===je.EXTRA_PRODUCTS).map(t=>t.label)}),e.jsxs(b,{spacing:2,direction:"row",alignItems:"center",justifyContent:"left",children:[e.jsx(B,{disabled:p.sprayCount<=0,maxLength:9,suffix:"sprays",label:"Uses",value:m,onChange:S}),e.jsx(k,{disabled:p.sprayCount<=0||p.sprayCount.toString()===m,onClick:()=>S(p.sprayCount.toString()),children:e.jsx(w,{title:"Reset",children:e.jsx(A,{})})})]})]}),e.jsxs(b,{spacing:2,children:[e.jsx(h,{children:"Transport capacity"}),Object.entries(o).map(([t,i])=>e.jsxs(b,{spacing:2,direction:"row",alignItems:"center",justifyContent:"left",children:[e.jsx(B,{label:t,maxLength:8,suffix:"/min",value:i,onChange:x=>ne(t,x)}),e.jsx(k,{disabled:i==="360",onClick:()=>ne(t,"360"),children:e.jsx(w,{title:"Reset",children:e.jsx(A,{})})})]},t))]}),e.jsxs(b,{spacing:2,children:[e.jsx(h,{children:"Sorter connections"}),Object.entries(n).map(([t,i])=>e.jsxs(b,{spacing:2,direction:"row",alignItems:"center",justifyContent:"left",children:[e.jsx(B,{label:t,maxLength:6,suffix:`/${d.connectionCount}`,value:i,onChange:x=>se(t,x)}),e.jsx(k,{disabled:i==="0",onClick:()=>se(t,"0"),children:e.jsx(w,{title:"Reset",children:e.jsx(A,{})})})]},t))]})]}),slotMain:e.jsxs(b,{spacing:2,children:[e.jsx(F,{sx:{padding:2},children:e.jsx(le,{children:e.jsxs(ae,{children:[e.jsx(de,{children:e.jsxs(T,{children:[e.jsx(C,{colSpan:3,children:e.jsx(h,{color:"primary",children:"Item (per minute)"})}),e.jsx(C,{colSpan:1,align:"right",children:e.jsx(h,{color:"primary",children:"Total"})}),e.jsx(C,{colSpan:1,align:"right",children:e.jsx(h,{color:"primary",children:"Per Array"})}),e.jsx(C,{colSpan:1,align:"right",children:e.jsx(h,{color:"primary",children:"Per Facility"})})]})}),e.jsxs(pe,{children:[Object.entries(Ue(a.cycleTimeSecond,p.cycleMultiplier*d.cycleMultiplier,p.productMultiplier,a.materialRecord,a.productRecord,ge,m)).map(([t,i])=>e.jsxs(T,{children:[e.jsx(C,{colSpan:3,children:t}),[i*I,i*M,i].map((x,u)=>e.jsx(C,{colSpan:1,children:e.jsxs(h,{display:"flex",alignItems:"center",justifyContent:"flex-end",fontSize:"inherit",children:[e.jsx(_,{fontSize:"inherit"}),D(x)]})},`demand-${u}`))]},t)),Object.entries(Ve(a.cycleTimeSecond,p.cycleMultiplier*d.cycleMultiplier,p.productMultiplier,a.productRecord)).map(([t,i])=>e.jsxs(T,{children:[e.jsx(C,{colSpan:3,children:t}),[i*I,i*M,i].map((x,u)=>e.jsx(C,{colSpan:1,children:e.jsxs(h,{display:"flex",alignItems:"center",justifyContent:"flex-end",fontSize:"inherit",children:[e.jsx(ue,{fontSize:"inherit"}),D(x)]})},`supply-${u}`))]},t))]})]})})}),e.jsx(F,{sx:{padding:2},children:e.jsx(le,{children:e.jsxs(ae,{children:[e.jsx(de,{children:e.jsxs(T,{children:[e.jsx(C,{colSpan:3,children:e.jsx(h,{color:"primary",children:"Power consumption (MW)"})}),e.jsx(C,{colSpan:1,align:"right",children:e.jsx(h,{color:"primary",children:"Total"})}),e.jsx(C,{colSpan:1,align:"right",children:e.jsx(h,{color:"primary",children:"Per array"})}),e.jsx(C,{colSpan:1,align:"right",children:e.jsx(h,{color:"primary",children:"Per facility"})})]})}),e.jsxs(pe,{children:[e.jsxs(T,{children:[e.jsx(C,{colSpan:3,children:"Work"}),[J*I,J*M,J].map((t,i)=>e.jsx(C,{colSpan:1,children:e.jsxs(h,{display:"flex",alignItems:"center",justifyContent:"flex-end",fontSize:"inherit",children:[e.jsx(_,{fontSize:"inherit"}),D(t)]})},`supply-${i}`))]}),e.jsxs(T,{children:[e.jsx(C,{colSpan:3,children:"Idle"}),[U*I,U*M,U].map((t,i)=>e.jsx(C,{colSpan:1,children:e.jsxs(h,{display:"flex",alignItems:"center",justifyContent:"flex-end",fontSize:"inherit",children:[e.jsx(_,{fontSize:"inherit"}),D(t)]})},`supply-${i}`))]})]})]})})})]}),children:[e.jsxs($,{subheader:"Layout",dense:!0,children:[e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(W,{})}),e.jsx(g,{primary:M,secondary:"Facilities per array"})]}),e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(W,{})}),e.jsx(g,{primary:ie,secondary:"Arrays"})]}),e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(W,{})}),e.jsx(g,{primary:I,secondary:"Total facilities"})]}),e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(W,{})}),e.jsx(g,{primary:Se,secondary:"Leftover facilities"})]})]}),e.jsxs($,{subheader:"Facility information",dense:!0,children:[e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(Me,{})}),e.jsx(g,{primary:d.label,secondary:"Name"})]}),e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(Ne,{})}),e.jsx(g,{primary:d.recipeType,secondary:"Category"})]}),e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(z,{})}),e.jsx(g,{primary:`${(d.cycleMultiplier*100).toPrecision()}%`,secondary:"Cycle speed"})]}),e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(Te,{})}),e.jsx(g,{primary:d.connectionCount,secondary:"Sorter connections"})]}),e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(G,{})}),e.jsx(g,{primary:`${d.workConsumptionMW.toPrecision()} MW`,secondary:"Work comsumption"})]}),e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(G,{})}),e.jsx(g,{primary:`${d.idleConsumptionMW.toPrecision()} MW`,secondary:"Idle comsumption"})]})]}),e.jsxs($,{subheader:"Recipe infomation",dense:!0,children:[e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(z,{})}),e.jsx(g,{primary:`${a.cycleTimeSecond} s`,secondary:"Cycle time"})]}),e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(Fe,{})}),e.jsx(g,{primary:a.speedupOnly?"No":"Yes",secondary:"Extra products bonus"})]}),e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(ve,{})}),e.jsx(g,{primary:Object.entries(a.materialRecord).map(([t,i])=>e.jsx(h,{fontSize:"inherit",children:`${i} ${t}`},t)),secondary:"Materials"})]}),e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(ue,{})}),e.jsx(g,{primary:Object.entries(a.productRecord).map(([t,i])=>e.jsx(h,{fontSize:"inherit",children:`${i} ${t}`},t)),secondary:"Products"})]})]}),e.jsxs($,{dense:!0,subheader:"Proliferator effects",children:[e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(G,{})}),e.jsx(g,{primary:`${((p.workConsumptionMultiplier-1)*100).toPrecision()}%`,secondary:"Additional work consumption"})]}),e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(z,{})}),e.jsx(g,{primary:`${((p.cycleMultiplier-1)*100).toPrecision()}%`,secondary:"Bonus cycle speed"})]}),e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(z,{})}),e.jsx(g,{primary:`${((p.productMultiplier-1)*100).toPrecision()}%`,secondary:"Bonus products per cycle"})]}),e.jsxs(y,{children:[e.jsx(f,{children:e.jsx(Le,{})}),e.jsx(g,{primary:m,secondary:"Sprays"})]})]})]})},Qe=()=>e.jsxs(Ee,{theme:$e,children:[e.jsx(ke,{}),e.jsx(He,{})]});Ce.createRoot(document.getElementById("root")).render(e.jsx(O.StrictMode,{children:e.jsx(Qe,{})}));
//# sourceMappingURL=index-H1at4xdw.js.map
