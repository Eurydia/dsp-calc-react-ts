import{r as S,j as e}from"./react-c7x3VyAv.js";import{c as Me}from"./react-dom-nwdlp_2f.js";import{c as Oe,a as Re,T as je,M as ce,I as le,u as Ie,b as Pe,P as T,S as b,G as N,B as Te,D as ve,d as M,e as E,f as w,R as $,g as ae,h as de,i as ue,j as F,k as C,l as pe,m as Y,A as me,L as B,n as j,o as y,F as W,p as f,q as Ne,C as Fe,r as z,U as Ae,s as _,t as Le,v as ke,w as Ee,x as we,y as $e}from"./@mui-ORoMQfIf.js";import{f as G,F as Be}from"./facility.mts-_VB0zU-w.js";import{r as X,a as H}from"./recipes-ZslLi6jF.js";import{p as Q,P as he,a as xe}from"./proliferator.mts-9Q72QBkP.js";import{s as We}from"./sorter.mts-RHRkJXms.js";/* empty css                    */import"./hoist-non-react-statics-bbVbV8Pa.js";import"./scheduler-jfnXNWZW.js";import"./prop-types-pmxPFTpu.js";import"./react-is-D0-Nh74l.js";import"./@babel-R4VyUtW_.js";import"./@emotion-KQWZ46Z_.js";import"./stylis-UTZzoVRx.js";import"./clsx-Zbgk8kpT.js";import"./react-transition-group-xc2LJcsj.js";import"./@popperjs-v-la0Vhf.js";import"./ingredient.mts-nBNVauyB.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const p of a.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&l(p)}).observe(document,{childList:!0,subtree:!0});function c(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(r){if(r.ep)return;r.ep=!0;const a=c(r);fetch(r.href,a)}})();const ze=Oe({components:{MuiTypography:{styleOverrides:{root:{userSelect:"none","&.MuiTypography-h1":{fontSize:"1.4rem",fontWeight:"500",color:"#C8AA81"},"&.MuiTypography-h2":{fontSize:"1.2rem",fontWeight:"400",color:"#C8AA81"}}}},MuiTableCell:{styleOverrides:{root:{"&.MuiTableCell-head":{color:"#C8AA81"}}}},MuiList:{styleOverrides:{root:{"&.MuiList-subheader":{color:"#C8AA81"}}}},MuiListItemIcon:{styleOverrides:{root:{color:"#CEB697"}}},MuiIconButton:{styleOverrides:{root:{color:"#7ABBAD"}}},MuiListItemText:{styleOverrides:{root:({theme:i})=>({color:i.palette.text.primary})}}},palette:{mode:"dark",text:{primary:Re("#fff",.87)},primary:{main:"#7ABBAD"},background:{paper:"#181D22"}}}),Z=i=>{const{sortOptions:n,label:c,value:l,onValueChange:r,options:a,disabledOptions:p}=i,g=S.useMemo(()=>n?a.sort():a,[a,n]),d=S.useMemo(()=>n?p.sort():p,[p,n]);return e.jsxs(je,{select:!0,fullWidth:!0,label:c,value:l,onChange:h=>r(h.target.value),children:[g.filter(h=>!d.includes(h)).map(h=>e.jsx(ce,{value:h,children:h},h)),d.map(h=>e.jsx(ce,{disabled:!0,value:h,children:h},h))]})},D=i=>{const{disabled:n,maxLength:c,prefix:l,suffix:r,label:a,value:p,onChange:g}=i,d=h=>{const o=h.target.value.slice(0,c).normalize();g(o)};return e.jsx(je,{fullWidth:!0,disabled:n,label:a,value:p,onChange:d,InputProps:{startAdornment:e.jsx(le,{position:"start",children:l}),endAdornment:e.jsx(le,{position:"end",children:r})}})},L=(i,n,c)=>{const l=Number.parseInt(i);return Number.isNaN(l)?n:l>c?c:l<n?n:l},k=i=>i.reduce((n,c)=>n+c,0),O=i=>Number.parseFloat(i.toPrecision(6)).toPrecision(),K=(i,n,c)=>{const l=localStorage.getItem(i);if(l===null)return c;try{return n(JSON.parse(l))}catch{return c}},De=i=>i===12?"Proliferator Mk.I":i===24?"Proliferator Mk.II":i===60?"Proliferator Mk.III":"None",qe=(i,n,c,l,r,a)=>{const p=Object.fromEntries(Object.entries(l).map(([o,I])=>{let u=Number.parseInt(I);return(Number.isNaN(u)||u===0)&&(u=360),[o,u]})),g=60/i*n,d=Math.min(...Object.entries(r).map(([o,I])=>{const u=I*g;return p[o]/u})),h=Math.min(...Object.entries(a).map(([o,I])=>{const u=I*g*c;return p[o]/u}));return Math.min(d,h)},Je=(i,n,c,l,r)=>{const a=Object.fromEntries(Object.entries(r).map(([d,h])=>{let o=Number.parseInt(h);return Number.isNaN(o)&&(o=0),[d,o]}));if(Object.values(a).every(d=>d===0))return 0;const p=60/i*n;return Math.max(...Object.entries(l).map(([d,h])=>{const o=h*p*c;return a[d]/o}))},ye=i=>{const n=Object.fromEntries(Object.entries(i).map(([l,r])=>{let a=Number.parseInt(r);return Number.isNaN(a)&&(a=0),[l,a]}));return k(Object.entries(n).map(([l,r])=>We(l).idleConsumptionMW*r))},Ue=(i,n)=>{const c=ye(n);return i+c},Ve=(i,n,c)=>{const l=ye(c);return i*n+l},Ye=(i,n,c,l,r,a,p)=>{const g=60/i*n,d=Object.fromEntries(Object.entries(l).map(([o,I])=>[o,I*g])),h=Number.parseInt(p);return!Number.isNaN(h)&&h>0&&(d[`${a} (on materials)`]=k(Object.values(l).map(o=>g*o))/h,d[`${a} (on products)`]=k(Object.values(r).map(o=>g*o*c))/h),d},_e=(i,n,c,l)=>{const r=60/i*n;return Object.fromEntries(Object.entries(l).map(([p,g])=>[p,g*r*c]))},Ge=i=>{const{slotSide:n,children:c,slotMain:l}=i;return e.jsxs(b,{padding:2,spacing:2,children:[e.jsx(T,{sx:{padding:2},children:n}),l,S.Children.toArray(c).map((r,a)=>e.jsx(T,{sx:{padding:2},children:r},`main-col-item-${a}`))]})},Xe=i=>{const{children:n,slotMain:c,slotSide:l}=i;return e.jsxs(N,{container:!0,columns:10,children:[e.jsx(N,{item:!0,md:!0,children:e.jsx(Te,{padding:4,sx:{height:"100vh",overflowY:"auto",scrollbarWidth:"thin"},children:e.jsxs(N,{container:!0,spacing:2,children:[e.jsx(N,{item:!0,md:12,children:c}),[0,1].map(r=>e.jsx(N,{item:!0,md:6,children:e.jsx(b,{spacing:2,children:S.Children.toArray(n).filter((a,p)=>p%2===r).map((a,p)=>e.jsx(T,{square:!0,elevation:2,sx:{padding:2},children:a},`main-col-${r}-item-${p}`))})},`col-${r}`))]})})}),e.jsx(N,{item:!0,md:3,children:e.jsx(T,{square:!0,elevation:1,sx:{height:"100vh",overflowY:"auto",scrollbarWidth:"thin",padding:2},children:l})})]})},He=i=>{const{slotSide:n,slotMain:c,children:l}=i,r=Ie(),a=Pe(r.breakpoints.down("md"));return e.jsxs(S.Fragment,{children:[e.jsx(T,{square:!0,elevation:0,sx:{display:a?"block":"none"},children:e.jsx(Ge,{children:l,slotMain:c,slotSide:n})}),e.jsx(T,{square:!0,elevation:0,sx:{display:a?"none":"block"},children:e.jsx(Xe,{children:l,slotMain:c,slotSide:n})})]})},Qe=(i,n)=>{const[c,l]=S.useState(()=>{const r=localStorage.getItem(n);if(r===null)return i;try{return JSON.parse(r)}catch{return i}});return S.useEffect(()=>{localStorage.setItem(n,JSON.stringify(c))},[n,c]),{content:c,setContent:l}},ee=(i,n)=>{const[c,l]=S.useState(()=>{const r=localStorage.getItem(n);if(r===null)return i;try{return JSON.parse(r)}catch{return i}});return S.useEffect(()=>{localStorage.setItem(n,JSON.stringify(c))},[c,n]),{content:c,setContent:l}},Ze=()=>{const{content:i,setContent:n}=ee({"Sorter Mk.I":"0","Sorter Mk.II":"0","Sorter Mk.III":"0","Pile Sorter":"0"},"sorters"),{content:c,setContent:l}=ee({},"flowrates"),{content:r,setContent:a}=ee({},"desiredProduction"),{content:p,setContent:g}=Qe("0","sprayCount"),[d,h]=S.useState(K("activeFacility",G,G("Arc Smelter"))),[o,I]=S.useState(K("activeRecipe",X,X("Copper Ingot"))),[u,fe]=S.useState(K("activeProlif",Q,Q("None"))),ge=t=>{const s=G(t);if(h(s),localStorage.setItem("activeFacility",JSON.stringify(s.label)),o.recipeType===s.recipeType)return;let x="Uh oh";const m=Object.values(H).filter(({recipeType:R})=>R===s.recipeType).map(({label:R})=>R);m.length>0&&(x=m[0]),te(x)},te=t=>{const s=X(t);s.speedupOnly&&u.mode===xe.EXTRA_PRODUCTS&&re("None"),I(s),localStorage.setItem("activeRecipe",JSON.stringify(s.label)),a(x=>{const m={};for(const R of Object.keys(s.productRecord))m[R]=x[R]??"0";return m}),l(()=>{const x={};for(const m of Object.keys(s.materialRecord))x[m]="360";for(const m of Object.keys(s.productRecord))x[m]="360";return x})},re=t=>{const s=Q(t);g(s.sprayCount.toString()),fe(s),localStorage.setItem("activeProlif",JSON.stringify(s.label))},ne=(t,s)=>{a(x=>{const m={...x};return s===""?(m[t]="",m):(m[t]=L(s,0,1e7).toString(),m)})},se=(t,s)=>{l(x=>{const m={...x};if(s==="")return m[t]="",m;const R=d.connectionCount*7200,A=k(Object.entries(x).filter(([V])=>V!==t).map(([,V])=>L(V,360,R)));return m[t]=L(s,0,R-A).toString(),m})},ie=(t,s)=>{n(x=>{const m={...x};if(s==="")return m[t]="",m;const R=k(Object.entries(x).filter(([A])=>A!==t).map(([,A])=>L(A,0,d.connectionCount)));return m[t]=L(s,0,d.connectionCount-R).toString(),m})},oe=De(u.sprayCount),v=S.useMemo(()=>Je(o.cycleTimeSecond,d.cycleMultiplier*u.cycleMultiplier,u.productMultiplier,o.productRecord,r),[o.cycleTimeSecond,d.cycleMultiplier,u.cycleMultiplier,u.productMultiplier,o.productRecord,r]),P=S.useMemo(()=>qe(o.cycleTimeSecond,d.cycleMultiplier*u.cycleMultiplier,u.productMultiplier,c,o.materialRecord,o.productRecord),[o.cycleTimeSecond,d.cycleMultiplier,u.cycleMultiplier,u.productMultiplier,c,o.materialRecord,o.productRecord]),Se=S.useMemo(()=>Ye(o.cycleTimeSecond,u.cycleMultiplier*d.cycleMultiplier,u.productMultiplier,o.materialRecord,o.productRecord,oe,p),[o.cycleTimeSecond,u.cycleMultiplier,d.cycleMultiplier,u.productMultiplier,o.materialRecord,o.productRecord,oe,p]),Ce=S.useMemo(()=>_e(o.cycleTimeSecond,u.cycleMultiplier*d.cycleMultiplier,u.productMultiplier,o.productRecord),[o.cycleTimeSecond,u.cycleMultiplier,d.cycleMultiplier,u.productMultiplier,o.productRecord]);let q=0;P>0&&(q=Math.floor(v/P));const be=v-q*P,J=Ve(d.workConsumptionMW,u.workConsumptionMultiplier,i),U=Ue(d.idleConsumptionMW,i);return e.jsxs(He,{slotSide:e.jsxs(b,{spacing:4,divider:e.jsx(ve,{flexItem:!0,variant:"fullWidth"}),children:[e.jsxs(b,{spacing:2,children:[e.jsx(M,{variant:"h1",children:"Configuration"}),e.jsx(M,{variant:"h2",children:"Manufacturing"}),e.jsx(Z,{sortOptions:!0,label:"Facility",value:d.label,onValueChange:ge,options:Object.keys(Be),disabledOptions:[]}),e.jsx(Z,{sortOptions:!0,label:"Recipe",value:o.label,onValueChange:te,options:Object.keys(H),disabledOptions:Object.values(H).filter(t=>t.recipeType!==d.recipeType).map(t=>t.label)})]}),e.jsxs(b,{spacing:2,children:[e.jsx(M,{variant:"h2",children:"Production target"}),Object.entries(r).map(([t,s])=>e.jsxs(b,{spacing:2,direction:"row",alignItems:"center",justifyContent:"left",children:[e.jsx(D,{label:t,maxLength:8,suffix:"/min",value:s,onChange:x=>ne(t,x)}),e.jsx(E,{disabled:s==="0","aria-label":`Reset ${t} production target`,onClick:()=>ne(t,"0"),children:e.jsx(w,{title:"Reset",children:e.jsx($,{})})})]},t))]}),e.jsxs(b,{spacing:2,children:[e.jsx(M,{variant:"h2",children:"Proliferation"}),e.jsx(Z,{label:"Proliferator",value:u.label,onValueChange:re,options:Object.keys(he),disabledOptions:Object.values(he).filter(t=>o.speedupOnly&&t.mode===xe.EXTRA_PRODUCTS).map(t=>t.label)}),e.jsxs(b,{spacing:2,direction:"row",alignItems:"center",justifyContent:"left",children:[e.jsx(D,{disabled:u.sprayCount<=0,maxLength:9,suffix:"sprays",label:"Uses",value:p,onChange:g}),e.jsx(E,{disabled:u.sprayCount<=0||u.sprayCount.toString()===p,"aria-label":"Reset proliferator uses",onClick:()=>g(u.sprayCount.toString()),children:e.jsx(w,{title:"Reset",children:e.jsx($,{})})})]})]}),e.jsxs(b,{spacing:2,children:[e.jsx(M,{variant:"h2",children:"Transport capacity"}),Object.entries(c).map(([t,s])=>e.jsxs(b,{spacing:2,direction:"row",alignItems:"center",justifyContent:"left",children:[e.jsx(D,{label:t,maxLength:8,suffix:"/min",value:s,onChange:x=>se(t,x)}),e.jsx(E,{disabled:s==="360","aria-label":`Reset ${t} flowrate`,onClick:()=>se(t,"360"),children:e.jsx(w,{title:"Reset",children:e.jsx($,{})})})]},t))]}),e.jsxs(b,{spacing:2,children:[e.jsx(M,{variant:"h2",children:"Sorter connections"}),Object.entries(i).map(([t,s])=>e.jsxs(b,{spacing:2,direction:"row",alignItems:"center",justifyContent:"left",children:[e.jsx(D,{label:t,maxLength:6,suffix:`/${d.connectionCount}`,value:s,onChange:x=>ie(t,x)}),e.jsx(E,{disabled:s==="0","aria-label":`Reset ${t} connection`,onClick:()=>ie(t,"0"),children:e.jsx(w,{title:"Reset",children:e.jsx($,{})})})]},t))]})]}),slotMain:e.jsxs(b,{spacing:2,children:[e.jsx(T,{square:!0,sx:{padding:2},children:e.jsx(ae,{children:e.jsxs(de,{children:[e.jsx(ue,{children:e.jsxs(F,{children:[e.jsx(C,{colSpan:3,children:"Item (per minute)"}),e.jsx(C,{colSpan:1,align:"right",children:"Total"}),e.jsx(C,{colSpan:1,align:"right",children:"Per Array"}),e.jsx(C,{colSpan:1,align:"right",children:"Per Facility"})]})}),e.jsxs(pe,{children:[Object.entries(Se).map(([t,s])=>e.jsxs(F,{children:[e.jsx(C,{colSpan:3,children:t}),[s*v,s*P,s].map((x,m)=>e.jsx(C,{colSpan:1,children:e.jsxs(M,{display:"flex",alignItems:"center",justifyContent:"flex-end",fontSize:"inherit",children:[e.jsx(Y,{fontSize:"inherit"}),O(x)]})},`demand-${m}`))]},t)),Object.entries(Ce).map(([t,s])=>e.jsxs(F,{children:[e.jsx(C,{colSpan:3,children:t}),[s*v,s*P,s].map((x,m)=>e.jsx(C,{colSpan:1,children:e.jsxs(M,{display:"flex",alignItems:"center",justifyContent:"flex-end",fontSize:"inherit",children:[e.jsx(me,{fontSize:"inherit"}),O(x)]})},`supply-${m}`))]},t))]})]})})}),e.jsx(T,{square:!0,sx:{padding:2},children:e.jsx(ae,{children:e.jsxs(de,{children:[e.jsx(ue,{children:e.jsxs(F,{children:[e.jsx(C,{colSpan:3,children:"Power consumption (MW)"}),e.jsx(C,{colSpan:1,align:"right",children:"Total"}),e.jsx(C,{colSpan:1,align:"right",children:"Per array"}),e.jsx(C,{colSpan:1,align:"right",children:"Per facility"})]})}),e.jsxs(pe,{children:[e.jsxs(F,{children:[e.jsx(C,{colSpan:3,children:"Work"}),[J*v,J*P,J].map((t,s)=>e.jsx(C,{colSpan:1,children:e.jsxs(M,{display:"flex",alignItems:"center",justifyContent:"flex-end",fontSize:"inherit",children:[e.jsx(Y,{fontSize:"inherit"}),O(t)]})},`supply-${s}`))]}),e.jsxs(F,{children:[e.jsx(C,{colSpan:3,children:"Idle"}),[U*v,U*P,U].map((t,s)=>e.jsx(C,{colSpan:1,children:e.jsxs(M,{display:"flex",alignItems:"center",justifyContent:"flex-end",fontSize:"inherit",children:[e.jsx(Y,{fontSize:"inherit"}),O(t)]})},`supply-${s}`))]})]})]})})})]}),children:[e.jsxs(B,{subheader:"Layout",dense:!0,children:[e.jsxs(j,{children:[e.jsx(y,{children:e.jsx(W,{})}),e.jsx(f,{primary:P,secondary:"Facilities per array"})]}),e.jsxs(j,{children:[e.jsx(y,{children:e.jsx(W,{})}),e.jsx(f,{primary:q,secondary:"Arrays"})]}),e.jsxs(j,{children:[e.jsx(y,{children:e.jsx(W,{})}),e.jsx(f,{primary:v,secondary:"Total facilities"})]}),e.jsxs(j,{children:[e.jsx(y,{children:e.jsx(W,{})}),e.jsx(f,{primary:be,secondary:"Leftover facilities"})]})]}),e.jsxs(B,{subheader:"Facility information",dense:!0,children:[e.jsxs(j,{children:[e.jsx(y,{children:e.jsx(Ne,{})}),e.jsx(f,{primary:d.label,secondary:"Name"})]}),e.jsxs(j,{children:[e.jsx(y,{children:e.jsx(Fe,{})}),e.jsx(f,{primary:d.recipeType,secondary:"Category"})]}),e.jsxs(j,{children:[e.jsx(y,{children:e.jsx(z,{})}),e.jsx(f,{primary:`${O(d.cycleMultiplier*100)}%`,secondary:"Cycle speed"})]}),e.jsxs(j,{children:[e.jsx(y,{children:e.jsx(Ae,{})}),e.jsx(f,{primary:d.connectionCount,secondary:"Sorter connections"})]}),e.jsxs(j,{children:[e.jsx(y,{children:e.jsx(_,{})}),e.jsx(f,{primary:`${O(d.workConsumptionMW)} MW`,secondary:"Work comsumption"})]}),e.jsxs(j,{children:[e.jsx(y,{children:e.jsx(_,{})}),e.jsx(f,{primary:`${O(d.idleConsumptionMW)} MW`,secondary:"Idle comsumption"})]})]}),e.jsxs(B,{subheader:"Recipe infomation",dense:!0,children:[e.jsxs(j,{children:[e.jsx(y,{children:e.jsx(z,{})}),e.jsx(f,{primary:`${O(o.cycleTimeSecond)} s`,secondary:"Cycle time"})]}),e.jsxs(j,{children:[e.jsx(y,{children:e.jsx(Le,{})}),e.jsx(f,{primary:o.speedupOnly?"No":"Yes",secondary:"Extra products bonus"})]}),e.jsxs(j,{children:[e.jsx(y,{children:e.jsx(ke,{})}),e.jsx(f,{primary:Object.entries(o.materialRecord).map(([t,s])=>e.jsx(M,{fontSize:"inherit",children:`${s} ${t}`},t)),secondary:"Materials"})]}),e.jsxs(j,{children:[e.jsx(y,{children:e.jsx(me,{})}),e.jsx(f,{primary:Object.entries(o.productRecord).map(([t,s])=>e.jsx(M,{fontSize:"inherit",children:`${s} ${t}`},t)),secondary:"Products"})]})]}),e.jsxs(B,{dense:!0,subheader:"Proliferator effects",children:[e.jsxs(j,{children:[e.jsx(y,{children:e.jsx(z,{})}),e.jsx(f,{primary:`${O((u.cycleMultiplier-1)*100)}%`,secondary:"Bonus cycle speed"})]}),e.jsxs(j,{children:[e.jsx(y,{children:e.jsx(z,{})}),e.jsx(f,{primary:`${O((u.productMultiplier-1)*100)}%`,secondary:"Bonus products per cycle"})]}),e.jsxs(j,{children:[e.jsx(y,{children:e.jsx(_,{})}),e.jsx(f,{primary:`${O((u.workConsumptionMultiplier-1)*100)}%`,secondary:"Additional work consumption"})]}),e.jsxs(j,{children:[e.jsx(y,{children:e.jsx(Ee,{})}),e.jsx(f,{primary:O(p===""?0:Number.parseInt(p)),secondary:"Sprays"})]})]})]})},Ke=()=>e.jsxs(we,{theme:ze,children:[e.jsx($e,{}),e.jsx(Ze,{})]});Me.createRoot(document.getElementById("root")).render(e.jsx(S.StrictMode,{children:e.jsx(Ke,{})}));
//# sourceMappingURL=index-tbTVYd8d.js.map
